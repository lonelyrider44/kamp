"use strict";(self.webpackChunkangular=self.webpackChunkangular||[]).push([[889],{32871:function(A,C,l){l.d(C,{n:function(){return e}});var _=l(15671),g=l(43144),p=l(40520),d=l(92340),Z=l(91891),e=function(){var c=function(){function f(v){(0,_.Z)(this,f),this.httpClient=v,this.httpOptions={headers:new p.WM({"Content-Type":"application/json"})}}return(0,g.Z)(f,[{key:"datatable",value:function(s){return this.httpClient.post("".concat(d.N.api_url,"/datatable/roditelj"),s)}},{key:"datatable_administrator",value:function(s){return this.httpClient.post("".concat(d.N.api_url,"/datatable/roditelj"),s)}},{key:"datatable_trener",value:function(s){return this.httpClient.post("".concat(d.N.api_url,"/datatable/trener"),s)}},{key:"all",value:function(){return this.httpClient.get("".concat(d.N.api_url,"/roditelj"))}},{key:"find",value:function(s){return this.httpClient.get("".concat(d.N.api_url,"/roditelj/").concat(s))}},{key:"store",value:function(s){return this.httpClient.post("".concat(d.N.api_url,"/roditelj"),JSON.stringify(s),this.httpOptions)}},{key:"update",value:function(s,F){return this.httpClient.put("".concat(d.N.api_url,"/roditelj/id"),JSON.stringify(F),this.httpOptions)}},{key:"delete",value:function(s){return this.httpClient.delete("".concat(d.N.api_url,"/roditelj/").concat(s),this.httpOptions)}},{key:"ucesnici",value:function(s){return this.httpClient.get("".concat(d.N.api_url,"/roditelj/").concat(s,"/ucesnici"))}}]),f}();return c.\u0275fac=function(v){return new(v||c)(Z.LFG(p.eN))},c.\u0275prov=Z.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c}()},72808:function(A,C,l){l.d(C,{n:function(){return e}});var _=l(15671),g=l(43144),p=l(40520),d=l(92340),Z=l(91891),e=function(){var c=function(){function f(v){(0,_.Z)(this,f),this.httpClient=v,this.httpOptions={headers:new p.WM({"Content-Type":"application/json"})}}return(0,g.Z)(f,[{key:"datatable",value:function(s){return this.httpClient.post("".concat(d.N.api_url,"/datatable/smena"),s)}},{key:"all",value:function(){return this.httpClient.get("".concat(d.N.api_url,"/smena"))}},{key:"find",value:function(s){return this.httpClient.get("".concat(d.N.api_url,"/smena/").concat(s))}},{key:"store",value:function(s){return this.httpClient.post("".concat(d.N.api_url,"/smena"),JSON.stringify(s),this.httpOptions)}},{key:"update",value:function(s,F){return this.httpClient.put("".concat(d.N.api_url,"/smena/").concat(s),JSON.stringify(F),this.httpOptions)}},{key:"delete",value:function(s){return this.httpClient.delete("".concat(d.N.api_url,"/smena/").concat(s),this.httpOptions)}},{key:"ucesnici",value:function(s){return this.httpClient.get("".concat(d.N.api_url,"/smena/").concat(s,"/ucesnici"))}}]),f}();return c.\u0275fac=function(v){return new(v||c)(Z.LFG(p.eN))},c.\u0275prov=Z.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c}()},82889:function(A,C,l){l.r(C),l.d(C,{ZahtevModule:function(){return ve}});var _=l(43144),g=l(15671),p=l(69808),d=l(74202),Z=l(81795),e=l(91891),c=l(47423);function f(i,r){if(1&i&&(e.TgZ(0,"div",2)(1,"div",3)(2,"p")(3,"strong"),e._uU(4,"Odgovor:"),e.qZA()(),e.TgZ(5,"p"),e._uU(6),e.qZA()()()),2&i){var n=e.oxw();e.xp6(6),e.Oqu(null==n.zahtev?null:n.zahtev.odgovor)}}var v=function(){var i=function(){function r(n,t){(0,g.Z)(this,r),this.zahtevService=n,this.activatedRoute=t}return(0,_.Z)(r,[{key:"ngOnInit",value:function(){var o,t=this;this.zahtevService.find(null===(o=this.activatedRoute.snapshot.params)||void 0===o?void 0:o.zahtevId).subscribe(function(a){t.zahtev=a})}}]),r}();return i.\u0275fac=function(n){return new(n||i)(e.Y36(Z.s),e.Y36(d.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-zahtev-details"]],decls:49,vars:9,consts:[[1,"main-content"],[1,"container"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header","card-header-danger"],[1,"card-title"],[1,"card-category"],[1,"card-body"],[1,"col-md-4"],[1,"row","border-bottom"],["class","row",4,"ngIf"],["mat-raised-button","","routerLink","odgovor",1,"btn","btn-danger","pull-right"],[1,"clearfix"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"h4",6),e._uU(9,"Zahtev"),e.qZA(),e.TgZ(10,"p",7),e._uU(11," Status zahteva "),e.TgZ(12,"strong"),e._uU(13),e.qZA()()(),e.TgZ(14,"div",8)(15,"div",2)(16,"div",9)(17,"p"),e._uU(18,"Roditelj: "),e.TgZ(19,"strong"),e._uU(20),e.qZA()()(),e.TgZ(21,"div",9)(22,"p"),e._uU(23,"Kamp: "),e.TgZ(24,"strong"),e._uU(25),e.qZA()()()(),e.TgZ(26,"div",10)(27,"div",9)(28,"p"),e._uU(29,"U\u010desnik "),e.TgZ(30,"strong"),e._uU(31),e.qZA()()(),e.TgZ(32,"div",9)(33,"p"),e._uU(34,"Smena "),e.TgZ(35,"strong"),e._uU(36),e.qZA()()()(),e.TgZ(37,"div",2)(38,"div",3)(39,"p")(40,"strong"),e._uU(41,"Zahtev:"),e.qZA()(),e.TgZ(42,"p"),e._uU(43),e.qZA()()(),e.YNc(44,f,7,1,"div",11),e._UZ(45,"div",10),e.TgZ(46,"a",12),e._uU(47," Odgovori "),e.qZA(),e._UZ(48,"div",13),e.qZA()()()()()()()()),2&n&&(e.xp6(13),e.Oqu(null==t.zahtev||null==t.zahtev.status_zahteva?null:t.zahtev.status_zahteva.naziv),e.xp6(7),e.AsE("",null==t.zahtev||null==t.zahtev.roditelj?null:t.zahtev.roditelj.prezime," ",null==t.zahtev||null==t.zahtev.roditelj?null:t.zahtev.roditelj.ime,""),e.xp6(5),e.Oqu(null==t.zahtev?null:t.zahtev.kamp.naziv),e.xp6(6),e.AsE("",null==t.zahtev||null==t.zahtev.ucesnik?null:t.zahtev.ucesnik.prezime," ",null==t.zahtev||null==t.zahtev.ucesnik?null:t.zahtev.ucesnik.ime,""),e.xp6(5),e.Oqu(null==t.zahtev||null==t.zahtev.smena?null:t.zahtev.smena.naziv),e.xp6(7),e.Oqu(null==t.zahtev?null:t.zahtev.zahtev),e.xp6(1),e.Q6J("ngIf",!(null==t.zahtev||!t.zahtev.odgovor)))},directives:[p.O5,c.zs,d.yS],styles:[""]}),i}(),s=l(19916),F=l(32871),j=l(59030),J=l(72808),N=l(65265),m=l(93075),E=l(17585),Y=l(57261),k=l(67322),b=l(74107),T=l(90508),q=l(77531);function R(i,r){1&i&&(e.TgZ(0,"p",23),e._uU(1," Novi unos "),e.qZA())}function D(i,r){1&i&&(e.TgZ(0,"p",23),e._uU(1," Izmena "),e.qZA())}function B(i,r){1&i&&(e.TgZ(0,"p",23),e._uU(1," Brisanje "),e.qZA())}function P(i,r){if(1&i&&(e.TgZ(0,"mat-option",24),e._uU(1),e.qZA()),2&i){var n=r.$implicit;e.Q6J("value",n.id),e.xp6(1),e.AsE("",n.prezime," ",n.ime,"")}}function K(i,r){if(1&i&&(e.TgZ(0,"mat-option",24),e._uU(1),e.qZA()),2&i){var n=r.$implicit;e.Q6J("value",n.id),e.xp6(1),e.AsE("",n.prezime," ",n.ime,"")}}function L(i,r){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){var t,n=e.oxw();e.xp6(1),e.hij(" ",null==(t=n.zahtevForm.get("zahtev"))||null==t.errors?null:t.errors.serverError," ")}}function W(i,r){if(1&i&&(e.TgZ(0,"mat-option",24),e._uU(1),e.qZA()),2&i){var n=r.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.naziv)}}function G(i,r){if(1&i&&(e.TgZ(0,"mat-option",24),e._uU(1),e.qZA()),2&i){var n=r.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.naziv)}}function $(i,r){1&i&&(e.TgZ(0,"p",23),e._uU(1," Novi unos "),e.qZA())}function w(i,r){1&i&&(e.TgZ(0,"p",23),e._uU(1," Izmena "),e.qZA())}function X(i,r){1&i&&(e.TgZ(0,"p",23),e._uU(1," Brisanje "),e.qZA())}function H(i,r){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){var t,n=e.oxw(2);e.xp6(1),e.hij(" ",null==(t=n.zahtevForm.get("odgovor"))||null==t.errors?null:t.errors.serverError," ")}}function V(i,r){if(1&i){var n=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"form",4),e.NdJ("ngSubmit",function(){return e.CHM(n),e.oxw().submitForm()}),e.TgZ(3,"div",2)(4,"div",3)(5,"div",5)(6,"div",25)(7,"h4",7),e._uU(8,"Odgovor"),e.qZA(),e.YNc(9,$,2,0,"p",8),e.YNc(10,w,2,0,"p",8),e.YNc(11,X,2,0,"p",8),e.qZA(),e.TgZ(12,"div",9)(13,"div",2)(14,"mat-form-field",10),e._UZ(15,"mat-select",26),e.qZA()(),e.TgZ(16,"div",2)(17,"mat-form-field",14),e._UZ(18,"textarea",27),e.YNc(19,H,2,1,"mat-error",16),e.qZA()(),e.TgZ(20,"button",20),e.NdJ("click",function(){return e.CHM(n),e.oxw().submitForm()}),e._uU(21," Potvrdi "),e.qZA(),e._UZ(22,"div",21),e.qZA()()()()()()()}if(2&i){var o,t=e.oxw();e.xp6(2),e.Q6J("formGroup",t.odgovorForm),e.xp6(7),e.Q6J("ngIf",t.action_create),e.xp6(1),e.Q6J("ngIf",t.action_update),e.xp6(1),e.Q6J("ngIf",t.action_delete),e.xp6(4),e.Q6J("errorStateMatcher",t.matcher),e.xp6(3),e.Q6J("ngModel",t.zahtev.odgovor)("errorStateMatcher",t.matcher),e.xp6(1),e.Q6J("ngIf",null==(o=t.zahtevForm.get("odgovor"))||null==o.errors?null:o.errors.serverError)}}var y=function(){var i=function(){function r(n,t,o,a,u,h,z,U,O,S,M){(0,g.Z)(this,r),this.fb=n,this.router=t,this.routerExt=o,this.activatedRoute=a,this.roditeljService=u,this.ucesnikService=h,this.kampService=z,this.smenaService=U,this.zahtevService=O,this._location=S,this._snackBar=M,this.matcher=new j.n,this.zahtev={zahtev:"",odgovor:"",status_id:1,roditelj_id:"",ucesnik_id:"",kamp_id:"",smena_id:""},this.action_create=!1,this.action_update=!1,this.action_delete=!1,this.kampovi=[],this.kamp_id=null,this.smene=[],this.smena_id=null,this.roditelji=[],this.roditelj_id=null,this.ucesnici=[],this.ucesnik_id=null,this.zahtevForm=function Q(i,r){return i.group({zahtev:[""],odgovor:[""],status_id:[""],roditelj_id:[""],ucesnik_id:[""],kamp_id:[""],smena_id:[""]})}(this.fb)}return(0,_.Z)(r,[{key:"ngOnInit",value:function(){var t=this;this.loadFromUrl(),this.zahtevService.statusi().subscribe(function(o){return t.statusi=o}),this.roditeljService.all().subscribe(function(o){return t.roditelji=o}),this.kampService.all().subscribe(function(o){return t.kampovi=o})}},{key:"kamp_changed",value:function(t){var o=this;this.kampService.smene(t.value).subscribe(function(a){return o.smene=a})}},{key:"smena_changed",value:function(){}},{key:"roditelj_changed",value:function(t){var o=this;console.log("roditelj changed"),this.roditeljService.ucesnici(t.value).subscribe(function(a){return o.ucesnici=a})}},{key:"ucesnik_changed",value:function(){}},{key:"store",value:function(){var t=this;!this.action_create||this.zahtevService.store(this.zahtevForm.value).subscribe({next:function(a){t.router.navigateByUrl(t.routerExt.getPreviousUrl())},error:function(a){t.submitFormFailed(t.zahtevForm,a)}})}},{key:"update",value:function(){var t=this;!this.action_update||this.zahtevService.update(this.zahtev.id,this.zahtevForm.value).subscribe({next:function(a){t.router.navigateByUrl(t.routerExt.getPreviousUrl())},error:function(a){t.submitFormFailed(t.zahtevForm,a)}})}},{key:"delete",value:function(){var t=this;!this.action_delete||this.zahtevService.delete(this.zahtev.id).subscribe({next:function(a){t.router.navigateByUrl(t.routerExt.getPreviousUrl())},error:function(a){t.submitFormFailed(t.zahtevForm,a)}})}},{key:"submitForm",value:function(){this.store(),this.update(),this.delete()}},{key:"submitFormFailed",value:function(t,o){422===o.status?Object.keys(o.error.errors).forEach(function(a){var u=t.get(a);u&&u.setErrors({serverError:o.error.errors[a]})}):this._snackBar.open(o.error.message,"OK")}},{key:"goBack",value:function(){this._location.back()}},{key:"loadFromUrl",value:function(){var o,a,t=this;this.action_create=this.activatedRoute.snapshot.url.map(function(u,h,z){return u.path}).includes("unos"),this.action_update=this.activatedRoute.snapshot.url.map(function(u,h,z){return u.path}).includes("izmena"),this.action_delete=this.activatedRoute.snapshot.url.map(function(u,h,z){return u.path}).includes("brisanje"),(null===(o=this.activatedRoute.snapshot.params)||void 0===o?void 0:o.zahtevId)&&this.zahtevService.find(null===(a=this.activatedRoute.snapshot.params)||void 0===a?void 0:a.zahtevId).subscribe(function(u){t.zahtev=u,t.zahtev.kamp_id&&t.kampService.smene(t.zahtev.kamp_id).subscribe(function(h){return t.smene=h}),t.zahtev.roditelj_id&&t.roditeljService.ucesnici(t.zahtev.roditelj_id).subscribe(function(h){return t.ucesnici=h})})}}]),r}();return i.\u0275fac=function(n){return new(n||i)(e.Y36(m.qu),e.Y36(d.F0),e.Y36(E.i),e.Y36(d.gz),e.Y36(F.n),e.Y36(N.M),e.Y36(s.f),e.Y36(J.n),e.Y36(Z.s),e.Y36(p.Ye),e.Y36(Y.ux))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-form"]],decls:37,vars:20,consts:[[1,"main-content"],[1,"container"],[1,"row"],[1,"col-md-12"],["novalidate","",3,"formGroup","ngSubmit"],[1,"card"],[1,"card-header","card-header-info"],[1,"card-title"],["class","card-category",4,"ngIf"],[1,"card-body"],[1,"example-full-width","col-md-6"],["placeholder","Roditelj","formControlName","roditelj_id",3,"ngModel","errorStateMatcher","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["placeholder","U\u010desnik","formControlName","ucesnik_id",3,"ngModel","errorStateMatcher"],[1,"example-full-width","col-md-12"],["matInput","","placeholder","Zahtev","formControlName","zahtev",3,"ngModel","errorStateMatcher"],[4,"ngIf"],[1,"row","border-bottom"],["placeholder","Kamp","formControlName","kamp_id",3,"ngModel","errorStateMatcher","selectionChange"],["placeholder","Smena","formControlName","smena_id",3,"ngModel","errorStateMatcher"],["mat-raised-button","","type","button",1,"btn","btn-danger","pull-right",3,"click"],[1,"clearfix"],["class","row",4,"ngIf"],[1,"card-category"],[3,"value"],[1,"card-header","card-header-danger"],["placeholder","Status","formControlName","status_id",3,"errorStateMatcher"],["matInput","","placeholder","Odgovor","formControlName","odgovor",3,"ngModel","errorStateMatcher"]],template:function(n,t){var o;1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4),e.NdJ("ngSubmit",function(){return t.submitForm()}),e.TgZ(5,"div",2)(6,"div",3)(7,"div",5)(8,"div",6)(9,"h4",7),e._uU(10,"Zahtev"),e.qZA(),e.YNc(11,R,2,0,"p",8),e.YNc(12,D,2,0,"p",8),e.YNc(13,B,2,0,"p",8),e.qZA(),e.TgZ(14,"div",9)(15,"div",2)(16,"mat-form-field",10)(17,"mat-select",11),e.NdJ("selectionChange",function(u){return t.roditelj_changed(u)}),e.YNc(18,P,2,3,"mat-option",12),e.qZA()(),e.TgZ(19,"mat-form-field",10)(20,"mat-select",13),e.YNc(21,K,2,3,"mat-option",12),e.qZA()()(),e.TgZ(22,"div",2)(23,"mat-form-field",14),e._UZ(24,"textarea",15),e.YNc(25,L,2,1,"mat-error",16),e.qZA()(),e.TgZ(26,"div",17)(27,"mat-form-field",10)(28,"mat-select",18),e.NdJ("selectionChange",function(u){return t.kamp_changed(u)}),e.YNc(29,W,2,2,"mat-option",12),e.qZA()(),e.TgZ(30,"mat-form-field",10)(31,"mat-select",19),e.YNc(32,G,2,2,"mat-option",12),e.qZA()()(),e.TgZ(33,"button",20),e.NdJ("click",function(){return t.submitForm()}),e._uU(34," Potvrdi "),e.qZA(),e._UZ(35,"div",21),e.qZA()()()()()()(),e.YNc(36,V,23,8,"div",22),e.qZA()()),2&n&&(e.xp6(4),e.Q6J("formGroup",t.zahtevForm),e.xp6(7),e.Q6J("ngIf",t.action_create),e.xp6(1),e.Q6J("ngIf",t.action_update),e.xp6(1),e.Q6J("ngIf",t.action_delete),e.xp6(4),e.Q6J("ngModel",t.zahtev.roditelj_id)("errorStateMatcher",t.matcher),e.xp6(1),e.Q6J("ngForOf",t.roditelji),e.xp6(2),e.Q6J("ngModel",t.zahtev.ucesnik_id)("errorStateMatcher",t.matcher),e.xp6(1),e.Q6J("ngForOf",t.ucesnici),e.xp6(3),e.Q6J("ngModel",t.zahtev.zahtev)("errorStateMatcher",t.matcher),e.xp6(1),e.Q6J("ngIf",null==(o=t.zahtevForm.get("zahtev"))||null==o.errors?null:o.errors.serverError),e.xp6(3),e.Q6J("ngModel",t.zahtev.kamp_id)("errorStateMatcher",t.matcher),e.xp6(1),e.Q6J("ngForOf",t.kampovi),e.xp6(2),e.Q6J("ngModel",t.zahtev.smena_id)("errorStateMatcher",t.matcher),e.xp6(1),e.Q6J("ngForOf",t.smene),e.xp6(4),e.Q6J("ngIf",!t.action_create))},directives:[m._Y,m.JL,m.sg,p.O5,k.KE,b.gD,m.JJ,m.u,p.sg,T.ey,q.Nt,m.Fj,k.TO,c.lW],styles:[""]}),i}(),ee=l(25245),te=l(32260);function ne(i,r){if(1&i&&(e.TgZ(0,"mat-option",17),e._uU(1),e.qZA()),2&i){var n=r.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.naziv)}}function ie(i,r){if(1&i&&(e.TgZ(0,"mat-option",17),e._uU(1),e.qZA()),2&i){var n=r.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.naziv)}}function ae(i,r){if(1&i&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&i){var n=r.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.naziv)}}function re(i,r){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){var t,n=e.oxw();e.xp6(1),e.hij(" ",null==(t=n.odgovorForm.get("odgovor"))||null==t.errors?null:t.errors.serverError," ")}}var ue=[{path:"",pathMatch:"full",component:function(){var i=function(){function r(n,t,o){var a=this;(0,g.Z)(this,r),this.router=n,this.zahtevService=t,this.kampService=o,this.kampovi=[],this.smene=[],this.kamp_id=null,this.smena_id=null,this.kampService.all().subscribe(function(u){a.kampovi=u})}return(0,_.Z)(r,[{key:"ngOnInit",value:function(){}},{key:"kamp_selected",value:function(t){var o=this;this.smene=this.kampovi.find(function(a){return a.id==o.kamp_id}).smene}}]),r}();return i.\u0275fac=function(n){return new(n||i)(e.Y36(d.F0),e.Y36(Z.s),e.Y36(s.f))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-index"]],decls:24,vars:6,consts:[[1,"main-content"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header","card-header-info"],[1,"card-title"],[1,"card-category"],[1,"card-body"],["mat-mini-fab","","aria-label","Example icon button with a delete icon","routerLink","unos",1,"pull-right"],[1,"pull-right","col-md-3"],["placeholder","Izaberite smenu",3,"ngModel","ngModelChange"],["smena",""],[3,"value",4,"ngFor","ngForOf"],["placeholder","Izaberite kamp",3,"ngModel","ngModelChange","selectionChange"],["kamp",""],[3,"kamp_id","smena_id"],[3,"value"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h4",6),e._uU(7,"Zahtevi "),e.qZA(),e._UZ(8,"p",7),e.qZA(),e.TgZ(9,"div",8)(10,"div",2)(11,"div",3)(12,"button",9)(13,"mat-icon"),e._uU(14,"add"),e.qZA()()()(),e.TgZ(15,"mat-form-field",10)(16,"mat-select",11,12),e.NdJ("ngModelChange",function(a){return t.smena_id=a}),e.YNc(18,ne,2,2,"mat-option",13),e.qZA()(),e.TgZ(19,"mat-form-field",10)(20,"mat-select",14,15),e.NdJ("ngModelChange",function(a){return t.kamp_id=a})("selectionChange",function(a){return t.kamp_selected(a)}),e.YNc(22,ie,2,2,"mat-option",13),e.qZA()(),e._UZ(23,"app-zahtev-datatable",16),e.qZA()()()()()()),2&n&&(e.xp6(16),e.Q6J("ngModel",t.smena_id),e.xp6(2),e.Q6J("ngForOf",t.smene),e.xp6(2),e.Q6J("ngModel",t.kamp_id),e.xp6(2),e.Q6J("ngForOf",t.kampovi),e.xp6(1),e.Q6J("kamp_id",t.kamp_id)("smena_id",t.smena_id))},directives:[c.lW,d.rH,ee.Hw,k.KE,b.gD,m.JJ,m.On,p.sg,T.ey,te.k],styles:[""]}),i}()},{path:"unos",pathMatch:"full",component:y},{path:":zahtevId",component:v},{path:":zahtevId/izmena",component:y},{path:":zahtevId/brisanje",component:y},{path:":zahtevId/odgovor",component:function(){var i=function(){function r(n,t,o,a,u,h,z,U,O,S,M){(0,g.Z)(this,r),this.fb=n,this.router=t,this.routerExt=o,this.activatedRoute=a,this.roditeljService=u,this.ucesnikService=h,this.kampService=z,this.smenaService=U,this.zahtevService=O,this._location=S,this._snackBar=M,this.matcher=new j.n,this.zahtev={zahtev:"",odgovor:"",status_id:1,roditelj_id:"",ucesnik_id:"",kamp_id:"",smena_id:""},this.action_create=!1,this.action_update=!1,this.action_delete=!1,this.kampovi=[],this.kamp_id=null,this.smene=[],this.smena_id=null,this.roditelji=[],this.roditelj_id=null,this.ucesnici=[],this.ucesnik_id=null,this.odgovorForm=function x(i,r){return i.group({odgovor:[""],status_id:[""]})}(this.fb)}return(0,_.Z)(r,[{key:"ngOnInit",value:function(){var t=this;this.loadFromUrl(),this.zahtevService.statusi().subscribe(function(o){return t.statusi=o})}},{key:"kamp_changed",value:function(t){var o=this;this.kampService.smene(t.value).subscribe(function(a){return o.smene=a})}},{key:"smena_changed",value:function(){}},{key:"roditelj_changed",value:function(t){var o=this;console.log("roditelj changed"),this.roditeljService.ucesnici(t.value).subscribe(function(a){return o.ucesnici=a})}},{key:"ucesnik_changed",value:function(){}},{key:"store",value:function(){var t=this;!this.action_create||this.zahtevService.store(this.zahtevForm.value).subscribe({next:function(a){t.router.navigateByUrl(t.routerExt.getPreviousUrl())},error:function(a){t.submitFormFailed(t.zahtevForm,a)}})}},{key:"update",value:function(){var t=this;!this.action_update||this.zahtevService.update_odgovor(this.zahtev.id,this.odgovorForm.value).subscribe({next:function(a){t.router.navigateByUrl("/admin/zahtevi")},error:function(a){t.submitFormFailed(t.zahtevForm,a)}})}},{key:"delete",value:function(){var t=this;!this.action_delete||this.zahtevService.delete(this.zahtev.id).subscribe({next:function(a){t.router.navigateByUrl(t.routerExt.getPreviousUrl())},error:function(a){t.submitFormFailed(t.zahtevForm,a)}})}},{key:"submitForm",value:function(){this.store(),this.update(),this.delete()}},{key:"submitFormFailed",value:function(t,o){422===o.status?Object.keys(o.error.errors).forEach(function(a){var u=t.get(a);u&&u.setErrors({serverError:o.error.errors[a]})}):this._snackBar.open(o.error.message,"OK")}},{key:"goBack",value:function(){this._location.back()}},{key:"loadFromUrl",value:function(){var o,a,t=this;this.action_create=this.activatedRoute.snapshot.url.map(function(u,h,z){return u.path}).includes("unos"),this.action_update=this.activatedRoute.snapshot.url.map(function(u,h,z){return u.path}).includes("izmena"),this.action_delete=this.activatedRoute.snapshot.url.map(function(u,h,z){return u.path}).includes("brisanje"),this.action_update=!0,(null===(o=this.activatedRoute.snapshot.params)||void 0===o?void 0:o.zahtevId)&&this.zahtevService.find(null===(a=this.activatedRoute.snapshot.params)||void 0===a?void 0:a.zahtevId).subscribe(function(u){t.zahtev=u,t.zahtev.kamp_id&&t.kampService.smene(t.zahtev.kamp_id).subscribe(function(h){return t.smene=h}),t.zahtev.roditelj_id&&t.roditeljService.ucesnici(t.zahtev.roditelj_id).subscribe(function(h){return t.ucesnici=h})})}}]),r}();return i.\u0275fac=function(n){return new(n||i)(e.Y36(m.qu),e.Y36(d.F0),e.Y36(E.i),e.Y36(d.gz),e.Y36(F.n),e.Y36(N.M),e.Y36(s.f),e.Y36(J.n),e.Y36(Z.s),e.Y36(p.Ye),e.Y36(Y.ux))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-odgovor-form"]],decls:52,vars:14,consts:[[1,"main-content"],[1,"container"],[1,"row"],[1,"col-md-12"],["novalidate","",3,"formGroup","ngSubmit"],[1,"card"],[1,"card-header","card-header-info"],[1,"card-title"],[1,"card-body"],[1,"col-md-4"],[1,"row","border-bottom"],[1,"example-full-width","col-md-6"],["placeholder","Status","formControlName","status_id",3,"ngModel","errorStateMatcher"],[3,"value",4,"ngFor","ngForOf"],[1,"example-full-width","col-md-12"],["matInput","","placeholder","Odgovor","formControlName","odgovor",3,"ngModel","errorStateMatcher"],[4,"ngIf"],["mat-raised-button","","type","button",1,"btn","btn-danger","pull-right",3,"click"],[1,"clearfix"],[3,"value"]],template:function(n,t){var o;1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4),e.NdJ("ngSubmit",function(){return t.submitForm()}),e.TgZ(5,"div",2)(6,"div",3)(7,"div",5)(8,"div",6)(9,"h4",7),e._uU(10,"Odgovor"),e.qZA()(),e.TgZ(11,"div",8)(12,"div",2)(13,"div",9)(14,"p"),e._uU(15,"Roditelj: "),e.TgZ(16,"strong"),e._uU(17),e.qZA()()(),e.TgZ(18,"div",9)(19,"p"),e._uU(20,"Kamp: "),e.TgZ(21,"strong"),e._uU(22),e.qZA()()()(),e.TgZ(23,"div",10)(24,"div",9)(25,"p"),e._uU(26,"U\u010desnik "),e.TgZ(27,"strong"),e._uU(28),e.qZA()()(),e.TgZ(29,"div",9)(30,"p"),e._uU(31,"Smena "),e.TgZ(32,"strong"),e._uU(33),e.qZA()()()(),e.TgZ(34,"div",2)(35,"div",3)(36,"p")(37,"strong"),e._uU(38,"Zahtev:"),e.qZA()(),e.TgZ(39,"p"),e._uU(40),e.qZA()()(),e.TgZ(41,"div",2)(42,"mat-form-field",11)(43,"mat-select",12),e.YNc(44,ae,2,2,"mat-option",13),e.qZA()()(),e.TgZ(45,"div",2)(46,"mat-form-field",14),e._UZ(47,"textarea",15),e.YNc(48,re,2,1,"mat-error",16),e.qZA()(),e.TgZ(49,"button",17),e.NdJ("click",function(){return t.submitForm()}),e._uU(50," Potvrdi "),e.qZA(),e._UZ(51,"div",18),e.qZA()()()()()()()()()),2&n&&(e.xp6(4),e.Q6J("formGroup",t.odgovorForm),e.xp6(13),e.AsE("",null==t.zahtev||null==t.zahtev.roditelj?null:t.zahtev.roditelj.prezime," ",null==t.zahtev||null==t.zahtev.roditelj?null:t.zahtev.roditelj.ime,""),e.xp6(5),e.Oqu(null==t.zahtev?null:t.zahtev.kamp.naziv),e.xp6(6),e.AsE("",null==t.zahtev||null==t.zahtev.ucesnik?null:t.zahtev.ucesnik.prezime," ",null==t.zahtev||null==t.zahtev.ucesnik?null:t.zahtev.ucesnik.ime,""),e.xp6(5),e.Oqu(null==t.zahtev||null==t.zahtev.smena?null:t.zahtev.smena.naziv),e.xp6(7),e.Oqu(null==t.zahtev?null:t.zahtev.zahtev),e.xp6(3),e.Q6J("ngModel",t.zahtev.status_id)("errorStateMatcher",t.matcher),e.xp6(1),e.Q6J("ngForOf",t.statusi),e.xp6(3),e.Q6J("ngModel",t.zahtev.odgovor)("errorStateMatcher",t.matcher),e.xp6(1),e.Q6J("ngIf",null==(o=t.odgovorForm.get("odgovor"))||null==o.errors?null:o.errors.serverError))},directives:[m._Y,m.JL,m.sg,k.KE,b.gD,m.JJ,m.u,p.sg,T.ey,q.Nt,m.Fj,p.O5,k.TO,c.lW],styles:[""]}),i}()}],se=function(){var i=(0,_.Z)(function r(){(0,g.Z)(this,r)});return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[d.Bz.forChild(ue)],d.Bz]}),i}(),de=l(2466),ve=function(){var i=(0,_.Z)(function r(){(0,g.Z)(this,r)});return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[p.ez,se,de.q,m.u5,m.UX]]}),i}()}}]);