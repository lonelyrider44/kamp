"use strict";(self.webpackChunkangular=self.webpackChunkangular||[]).push([[592],{37315:function(b,m,s){s.d(m,{G:function(){return u}});var h=s(15671),p=s(43144),d=s(40520),i=s(92340),l=s(91891),u=function(){var e=function(){function a(n){(0,h.Z)(this,a),this.httpClient=n,this.httpOptions={headers:new d.WM({"Content-Type":"application/json"})}}return(0,p.Z)(a,[{key:"datatable",value:function(t){return this.httpClient.post("".concat(i.N.api_url,"/datatable/trener"),t)}},{key:"all",value:function(){return this.httpClient.get("".concat(i.N.api_url,"/trener"))}},{key:"find",value:function(t){return this.httpClient.get("".concat(i.N.api_url,"/trener/").concat(t))}},{key:"store",value:function(t){return this.httpClient.post("".concat(i.N.api_url,"/trener"),JSON.stringify(t),this.httpOptions)}},{key:"update",value:function(t,r){return this.httpClient.put("".concat(i.N.api_url,"/trener/").concat(t),JSON.stringify(r),this.httpOptions)}},{key:"delete",value:function(t){return this.httpClient.delete("".concat(i.N.api_url,"/trener/").concat(t),this.httpOptions)}}]),a}();return e.\u0275fac=function(n){return new(n||e)(l.LFG(d.eN))},e.\u0275prov=l.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},52246:function(b,m,s){s.d(m,{j:function(){return e}});var h=s(15671),p=s(43144),d=s(899),i=s(91891),l=s(74202),u=["dataTablePrijava"],e=function(){var a=function(){function n(t,r,o){(0,h.Z)(this,n),this.router=t,this.activatedRoute=r,this.prijavaService=o}return(0,p.Z)(n,[{key:"ngOnInit",value:function(){var r,o,_;this.kamp_id=null===(r=this.activatedRoute.snapshot.parent.params)||void 0===r?void 0:r.kampId,this.smena_id=null===(o=this.activatedRoute.snapshot.parent.params)||void 0===o?void 0:o.smenaId,this.ucesnik_id=null===(_=this.activatedRoute.snapshot.parent.params)||void 0===_?void 0:_.ucesnikId}},{key:"ngOnChanges",value:function(r){this.dataTable&&this.dataTable.DataTable().ajax.reload()}},{key:"ngAfterViewInit",value:function(){var r=this,o=this;this.dataTable=$(this.table.nativeElement),this.dataTable.DataTable({ajax:function(c,f){c.kamp_id=r.kamp_id,c.smena_id=r.smena_id,c.ucesnik_id=r.ucesnik_id,r.prijavaService.datatable(c).subscribe(function(v){f({recordsTotal:v.recordsTotal,recordsFiltered:v.recordsFiltered,data:v.data,kamp_id:v.kamp_id,smena_id:v.smena_id})})},responsive:!0,autoWidth:!1,buttons:{buttons:[{text:'<i class="fas fa-plus"></i>',action:function(c,f,v,k){o.router.navigateByUrl("/korisnici/create")},className:"btn btn-primary"}],dom:{button:{className:"btn"}}},columns:[{title:"U\u010desnik",data:"ucesnik",name:"ucesnik"},{title:"Kamp",data:"kamp",name:"kamps.naziv"},{title:"Smena",data:"smena",name:"smenas.naziv"},{title:"Akcije",data:"action",name:"action",width:"120px",className:"dt-center"}],initComplete:function(c,f){o.dataTable.DataTable().columns(1).visible(null==f.kamp_id)},drawCallback:function(){$(".btnShowPrijava").on("click",function(c){o.router.navigateByUrl("/admin/prijava/".concat($(this).data("id")))}),$(".btnEditPrijava").on("click",function(c){o.router.navigateByUrl("/admin/prijava/".concat($(this).data("id"),"/izmena"))}),$(".btnRemovePrijava").on("click",function(c){o.router.navigateByUrl("/admin/prijava/".concat($(this).data("id"),"/brisanje"))})},language:{url:"//cdn.datatables.net/plug-ins/1.12.1/i18n/sr-SP.json"}}).buttons().container().appendTo("#datatable_prijava_wrapper .col-md-6:eq(0)")}}]),n}();return a.\u0275fac=function(t){return new(t||a)(i.Y36(l.F0),i.Y36(l.gz),i.Y36(d.$))},a.\u0275cmp=i.Xpm({type:a,selectors:[["app-prijava-datatable"]],viewQuery:function(t,r){var o;1&t&&i.Gf(u,5),2&t&&i.iGM(o=i.CRH())&&(r.table=o.first)},inputs:{kamp_id:"kamp_id",smena_id:"smena_id",ucesnik_id:"ucesnik_id"},features:[i.TTD],decls:3,vars:0,consts:[[1,"table-responsive"],["id","datatable_prijava",1,"table","table-bordered","table-striped","table-sm"],["dataTablePrijava",""]],template:function(t,r){1&t&&(i.TgZ(0,"div",0),i._UZ(1,"table",1,2),i.qZA())},styles:[""]}),a}()},5667:function(b,m,s){s.d(m,{l:function(){return i}});var h=s(15671),p=s(43144),d=s(59030),i=function(){function l(u,e,a,n,t){(0,h.Z)(this,l),this.fb=u,this.router=e,this.activatedRoute=a,this.routerExt=n,this._snackBar=t,this.matcher=new d.n,this.action_create=!1,this.action_update=!1,this.action_delete=!1}return(0,p.Z)(l,[{key:"obj",get:function(){return null}},{key:"store",value:function(){var a,e=this;null===(a=this.service)||void 0===a||a.store(this.form.value).subscribe({next:function(t){e.router.navigateByUrl(e.routerExt.getPreviousUrl())},error:function(t){e.submitFormFailed(e.form,t)}})}},{key:"update",value:function(){var a,n,e=this;null===(a=this.service)||void 0===a||a.update(null===(n=this.obj)||void 0===n?void 0:n.id,this.form.value).subscribe({next:function(r){e.router.navigateByUrl(e.routerExt.getPreviousUrl())},error:function(r){e.submitFormFailed(e.form,r)}})}},{key:"delete",value:function(){var a,e=this;this.service.delete(null===(a=this.obj)||void 0===a?void 0:a.id).subscribe({next:function(t){e.router.navigateByUrl(e.routerExt.getPreviousUrl())},error:function(t){e.submitFormFailed(e.form,t)}})}},{key:"submitForm",value:function(){console.log("Submit form"),console.log(this.action_create),this.action_create&&this.store(),this.action_update&&this.update(),this.action_delete&&this.delete()}},{key:"submitFormFailed",value:function(e,a){422===a.status?Object.keys(a.error.errors).forEach(function(n){var t=e.get(n);t&&t.setErrors({serverError:a.error.errors[n]})}):this._snackBar.open(a.error.message,"OK")}},{key:"goBack",value:function(){this.router.navigateByUrl(this.routerExt.getPreviousUrl())}},{key:"loadFromUrl",value:function(){this.action_create=this.activatedRoute.snapshot.url.map(function(e,a,n){return e.path}).includes("unos"),this.action_update=this.activatedRoute.snapshot.url.map(function(e,a,n){return e.path}).includes("izmena"),this.action_delete=this.activatedRoute.snapshot.url.map(function(e,a,n){return e.path}).includes("brisanje")}}]),l}()}}]);