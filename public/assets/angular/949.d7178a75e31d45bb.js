"use strict";(self.webpackChunkangular=self.webpackChunkangular||[]).push([[949],{72808:function(O,b,r){r.d(b,{n:function(){return U}});var f=r(15671),_=r(43144),g=r(40520),l=r(92340),t=r(91891),U=function(){var m=function(){function d(u){(0,f.Z)(this,d),this.httpClient=u,this.httpOptions={headers:new g.WM({"Content-Type":"application/json"})}}return(0,_.Z)(d,[{key:"datatable",value:function(i){return this.httpClient.post("".concat(l.N.api_url,"/datatable/smena"),i)}},{key:"all",value:function(){return this.httpClient.get("".concat(l.N.api_url,"/smena"))}},{key:"find",value:function(i){return this.httpClient.get("".concat(l.N.api_url,"/smena/").concat(i))}},{key:"store",value:function(i){return this.httpClient.post("".concat(l.N.api_url,"/smena"),JSON.stringify(i),this.httpOptions)}},{key:"update",value:function(i,v){return this.httpClient.put("".concat(l.N.api_url,"/smena/").concat(i),JSON.stringify(v),this.httpOptions)}},{key:"delete",value:function(i){return this.httpClient.delete("".concat(l.N.api_url,"/smena/").concat(i),this.httpOptions)}},{key:"ucesnici",value:function(i){return this.httpClient.get("".concat(l.N.api_url,"/smena/").concat(i,"/ucesnici"))}}]),d}();return m.\u0275fac=function(u){return new(u||m)(t.LFG(g.eN))},m.\u0275prov=t.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m}()},28387:function(O,b,r){r.d(b,{R:function(){return m}});var f=r(15671),_=r(43144),g=r(33812),l=r(91891),t=r(74202),U=["dataTableUplata"],m=function(){var d=function(){function u(i,v,p){(0,f.Z)(this,u),this.router=i,this.activatedRoute=v,this.uplataService=p}return(0,_.Z)(u,[{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){var v=this,p=this;this.dataTable=$(this.table.nativeElement),this.dataTable.DataTable({ajax:function(C,M){var T;C.kamp_id=null===(T=v.activatedRoute.snapshot.parent.params)||void 0===T?void 0:T.kampId,v.uplataService.datatable(C).subscribe(function(F){M({recordsTotal:F.recordsTotal,recordsFiltered:F.recordsFiltered,data:F.data,kamp_id:F.kamp_id})})},responsive:!0,autoWidth:!1,buttons:{buttons:[{text:'<i class="fas fa-plus"></i>',action:function(C,M,T,F){p.router.navigateByUrl("/korisnici/create")},className:"btn btn-primary"}],dom:{button:{className:"btn"}}},columns:[{title:"Kamp",data:"kamp",name:"kamps.naziv"},{title:"Smena",data:"smena",name:"smenas.naziv"},{title:"U\u010desnik",data:"ucesnik",name:"ucesniks.prezime"},{title:"Datum uplate",data:"datum_uplate",name:"datum_uplate"},{title:"Iznos",data:"iznos",name:"iznos_rsd"},{title:"Akcije",data:"action",name:"action",width:"10%"}],initComplete:function(C,M){p.dataTable.DataTable().columns(0).visible(null==M.kamp_id)},drawCallback:function(){$(".btnEditUplata").on("click",function(C){p.router.navigateByUrl("admin/uplata/".concat($(this).data("id"),"/izmena"))}),$(".btnDeleteUplata").on("click",function(C){p.router.navigateByUrl("admin/uplata/".concat($(this).data("id"),"/brisanje"))})}}).buttons().container().appendTo("#datatable_uplata_wrapper .col-md-6:eq(0)")}}]),u}();return d.\u0275fac=function(i){return new(i||d)(l.Y36(t.F0),l.Y36(t.gz),l.Y36(g.J))},d.\u0275cmp=l.Xpm({type:d,selectors:[["app-uplata-datatable"]],viewQuery:function(i,v){var p;1&i&&l.Gf(U,5),2&i&&l.iGM(p=l.CRH())&&(v.table=p.first)},decls:3,vars:0,consts:[[1,"table-responsive"],["id","datatable_uplata",1,"table","table-bordered","table-striped","table-sm"],["dataTableUplata",""]],template:function(i,v){1&i&&(l.TgZ(0,"div",0),l._UZ(1,"table",1,2),l.qZA())},styles:[""]}),d}()},64949:function(O,b,r){r.r(b),r.d(b,{UplataModule:function(){return tt}});var f=r(43144),_=r(15671),g=r(69808),l=r(74202),t=r(91891),U=function(){var e=function(){function o(){(0,_.Z)(this,o)}return(0,f.Z)(o,[{key:"ngOnInit",value:function(){}}]),o}();return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-details"]],decls:2,vars:0,template:function(n,a){1&n&&(t.TgZ(0,"p"),t._uU(1,"details works!"),t.qZA())},styles:[""]}),e}(),m=r(45687),d=r(72808),v=r(33812),p=r(93075),k=r(57261),C=r(67322),M=r(74107),T=r(90508),F=r(77531),S=r(86856),N=r(47423);function x(e,o){1&e&&(t.TgZ(0,"p",26),t._uU(1," Novi unos "),t.qZA())}function J(e,o){1&e&&(t.TgZ(0,"p",26),t._uU(1," Izmena "),t.qZA())}function z(e,o){1&e&&(t.TgZ(0,"p",26),t._uU(1," Brisanje "),t.qZA())}function R(e,o){if(1&e&&(t.TgZ(0,"mat-option",27),t._uU(1),t.qZA()),2&e){var n=o.$implicit;t.Q6J("value",n.id),t.xp6(1),t.Oqu(n.naziv)}}function B(e,o){if(1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e){var a,n=t.oxw();t.xp6(1),t.hij(" ",null==(a=n.uplataForm.get("kamp_id"))||null==a.errors?null:a.errors.serverError," ")}}function P(e,o){if(1&e&&(t.TgZ(0,"mat-option",27),t._uU(1),t.qZA()),2&e){var n=o.$implicit;t.Q6J("value",n.id),t.xp6(1),t.Oqu(n.naziv)}}function j(e,o){if(1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e){var a,n=t.oxw();t.xp6(1),t.hij(" ",null==(a=n.uplataForm.get("smena_id"))||null==a.errors?null:a.errors.serverError," ")}}function Y(e,o){if(1&e&&(t.TgZ(0,"mat-option",27),t._uU(1),t.qZA()),2&e){var n=o.$implicit;t.Q6J("value",n.id),t.xp6(1),t.lnq("",n.prezime," ",n.ime," (",n.jmbg_pasos,")")}}function Q(e,o){if(1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e){var a,n=t.oxw();t.xp6(1),t.hij(" ",null==(a=n.uplataForm.get("ucesnik_id"))||null==a.errors?null:a.errors.serverError," ")}}function W(e,o){if(1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e){var a,n=t.oxw();t.xp6(1),t.hij(" ",null==(a=n.uplataForm.get("iznos_rsd"))||null==a.errors?null:a.errors.serverError," ")}}function K(e,o){if(1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e){var a,n=t.oxw();t.xp6(1),t.hij(" ",null==(a=n.uplataForm.get("iznos_rsd"))||null==a.errors?null:a.errors.serverError," ")}}var I=function(){var e=function(){function o(n,a,s,c,h,y,Z,E){(0,_.Z)(this,o),this.fb=n,this.router=a,this.activatedRoute=s,this.uplataService=c,this.kampService=h,this.smenaService=y,this._location=Z,this._snackBar=E,this.matcher=new L,this.uplata={iznos_rsd:"",iznos_eur:""},this.action_create=!1,this.action_update=!1,this.action_delete=!1,this.kampovi=[],this.smene=[],this.ucesnici=[],this.uplataForm=function i(e,o){return e.group({iznos_rsd:[""],iznos_eur:[""],ucesnik_id:[""],kamp_id:[""],smena_id:[""],datum_uplate:[""]})}(this.fb)}return(0,f.Z)(o,[{key:"ngOnInit",value:function(){var a=this;this.loadFromUrl(),this.kampService.all().subscribe(function(s){return a.kampovi=s})}},{key:"kamp_changed",value:function(a){var s=this;this.kampService.smene(a.value).subscribe(function(c){return s.smene=c}),this.kampService.ucesnici(a.value).subscribe(function(c){return s.ucesnici=c})}},{key:"smena_changed",value:function(a){var s=this;this.smenaService.ucesnici(a.value).subscribe(function(c){return s.ucesnici=c})}},{key:"store",value:function(){var a=this;!this.action_create||this.uplataService.store(this.uplataForm.value).subscribe({next:function(c){a.router.navigateByUrl("/admin/kamp")},error:function(c){a.submitFormFailed(a.uplataForm,c)}})}},{key:"update",value:function(){var a=this;!this.action_update||this.uplataService.update(this.uplata.id,this.uplataForm.getRawValue()).subscribe({next:function(c){a.router.navigateByUrl("/admin/kamp")},error:function(c){a.submitFormFailed(a.uplataForm,c)}})}},{key:"delete",value:function(){var a=this;!this.action_delete||this.uplataService.delete(this.uplata.id).subscribe({next:function(c){a.router.navigateByUrl("/admin/kamp")},error:function(c){a.submitFormFailed(a.uplataForm,c)}})}},{key:"submitForm",value:function(){this.store(),this.update(),this.delete()}},{key:"submitFormFailed",value:function(a,s){422===s.status?Object.keys(s.error.errors).forEach(function(c){var h=a.get(c);h&&h.setErrors({serverError:s.error.errors[c]})}):this._snackBar.open(s.error.message,"OK")}},{key:"goBack",value:function(){this._location.back()}},{key:"loadFromUrl",value:function(){var s,c,a=this;this.action_create=this.activatedRoute.snapshot.url.map(function(h,y,Z){return h.path}).includes("unos"),this.action_update=this.activatedRoute.snapshot.url.map(function(h,y,Z){return h.path}).includes("izmena"),this.action_delete=this.activatedRoute.snapshot.url.map(function(h,y,Z){return h.path}).includes("brisanje"),(null===(s=this.activatedRoute.snapshot.params)||void 0===s?void 0:s.uplataId)&&this.uplataService.find(null===(c=this.activatedRoute.snapshot.params)||void 0===c?void 0:c.uplataId).subscribe(function(h){console.log(h),a.uplata=h,a.kamp_changed({value:a.uplata.kamp_id})})}}]),o}();return e.\u0275fac=function(n){return new(n||e)(t.Y36(p.qu),t.Y36(l.F0),t.Y36(l.gz),t.Y36(v.J),t.Y36(m.f),t.Y36(d.n),t.Y36(g.S$),t.Y36(k.ux))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-form"]],decls:46,vars:29,consts:[[1,"main-content"],[1,"container"],[1,"row"],[1,"offset-md-2","col-md-8"],["novalidate","",3,"formGroup","ngSubmit"],[1,"col-md-12"],[1,"card"],[1,"card-header","card-header-danger"],[1,"card-title"],["class","card-category",4,"ngIf"],[1,"card-body"],[1,"example-full-width","col-md-6"],["placeholder","Kamp","formControlName","kamp_id",3,"ngModel","errorStateMatcher","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["placeholder","Smena","formControlName","smena_id",3,"ngModel","errorStateMatcher","selectionChange"],[1,"example-full-width","col-md-12"],["placeholder","U\u010desnik","formControlName","ucesnik_id",3,"ngModel","errorStateMatcher"],["matInput","","placeholder","Iznos RSD","formControlName","iznos_rsd",3,"ngModel","readonly","errorStateMatcher"],["matInput","","placeholder","Iznos EUR","formControlName","iznos_eur",3,"ngModel","readonly","errorStateMatcher"],["appCustomDateFormat1","",1,"example-full-width","col-md-6"],["matInput","","formControlName","datum_uplate",3,"matDatepicker","ngModel","readonly","errorStateMatcher"],["matSuffix","",3,"for"],["datum_picker",""],["mat-raised-button","","type","button",1,"btn","btn-danger","pull-right",3,"click"],[1,"clearfix"],[1,"card-category"],[3,"value"]],template:function(n,a){if(1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4),t.NdJ("ngSubmit",function(){return a.submitForm()}),t.TgZ(5,"div",2)(6,"div",5)(7,"div",6)(8,"div",7)(9,"h4",8),t._uU(10,"Uplata"),t.qZA(),t.YNc(11,x,2,0,"p",9),t.YNc(12,J,2,0,"p",9),t.YNc(13,z,2,0,"p",9),t.qZA(),t.TgZ(14,"div",10)(15,"div",2)(16,"mat-form-field",11)(17,"mat-select",12),t.NdJ("selectionChange",function(A){return a.kamp_changed(A)}),t.YNc(18,R,2,2,"mat-option",13),t.qZA(),t.YNc(19,B,2,1,"mat-error",14),t.qZA(),t.TgZ(20,"mat-form-field",11)(21,"mat-select",15),t.NdJ("selectionChange",function(A){return a.smena_changed(A)}),t.YNc(22,P,2,2,"mat-option",13),t.qZA(),t.YNc(23,j,2,1,"mat-error",14),t.qZA(),t.TgZ(24,"mat-form-field",16)(25,"mat-select",17),t.YNc(26,Y,2,4,"mat-option",13),t.qZA(),t.YNc(27,Q,2,1,"mat-error",14),t.qZA()(),t.TgZ(28,"div",2)(29,"mat-form-field",11),t._UZ(30,"input",18),t.YNc(31,W,2,1,"mat-error",14),t.qZA(),t.TgZ(32,"mat-form-field",11),t._UZ(33,"input",19),t.YNc(34,K,2,1,"mat-error",14),t.qZA()(),t.TgZ(35,"div",2)(36,"mat-form-field",20)(37,"mat-label"),t._uU(38,"Datum uplate"),t.qZA(),t._UZ(39,"input",21)(40,"mat-datepicker-toggle",22)(41,"mat-datepicker",null,23),t.qZA()(),t.TgZ(43,"button",24),t.NdJ("click",function(){return a.submitForm()}),t._uU(44," Potvrdi "),t.qZA(),t._UZ(45,"div",25),t.qZA()()()()()()()()()),2&n){var c,h,y,Z,E,s=t.MAs(42);t.xp6(4),t.Q6J("formGroup",a.uplataForm),t.xp6(7),t.Q6J("ngIf",a.action_create),t.xp6(1),t.Q6J("ngIf",a.action_update),t.xp6(1),t.Q6J("ngIf",a.action_delete),t.xp6(4),t.Q6J("ngModel",a.uplata.kamp_id)("errorStateMatcher",a.matcher),t.xp6(1),t.Q6J("ngForOf",a.kampovi),t.xp6(1),t.Q6J("ngIf",null==(c=a.uplataForm.get("kamp_id"))||null==c.errors?null:c.errors.serverError),t.xp6(2),t.Q6J("ngModel",a.uplata.smena_id)("errorStateMatcher",a.matcher),t.xp6(1),t.Q6J("ngForOf",a.smene),t.xp6(1),t.Q6J("ngIf",null==(h=a.uplataForm.get("smena_id"))||null==h.errors?null:h.errors.serverError),t.xp6(2),t.Q6J("ngModel",a.uplata.ucesnik_id)("errorStateMatcher",a.matcher),t.xp6(1),t.Q6J("ngForOf",a.ucesnici),t.xp6(1),t.Q6J("ngIf",null==(y=a.uplataForm.get("ucesnik_id"))||null==y.errors?null:y.errors.serverError),t.xp6(3),t.Q6J("ngModel",a.uplata.iznos_rsd)("readonly",a.action_delete)("errorStateMatcher",a.matcher),t.xp6(1),t.Q6J("ngIf",null==(Z=a.uplataForm.get("iznos_rsd"))||null==Z.errors?null:Z.errors.serverError),t.xp6(2),t.Q6J("ngModel",a.uplata.iznos_eur)("readonly",a.action_delete)("errorStateMatcher",a.matcher),t.xp6(1),t.Q6J("ngIf",null==(E=a.uplataForm.get("iznos_rsd"))||null==E.errors?null:E.errors.serverError),t.xp6(5),t.Q6J("matDatepicker",s)("ngModel",a.uplata.datum_uplate)("readonly",a.action_delete)("errorStateMatcher",a.matcher),t.xp6(1),t.Q6J("for",s)}},directives:[p._Y,p.JL,p.sg,g.O5,C.KE,M.gD,p.JJ,p.u,g.sg,T.ey,C.TO,F.Nt,p.Fj,C.hX,S.hl,S.nW,C.R9,S.Mq,N.lW],styles:[""]}),e}(),L=function(){function e(){(0,_.Z)(this,e)}return(0,f.Z)(e,[{key:"isErrorState",value:function(n,a){return n&&n.invalid}}]),e}(),G=r(25245),X=r(28387),H=[{path:"",pathMatch:"full",component:function(){var e=function(){function o(){(0,_.Z)(this,o)}return(0,f.Z)(o,[{key:"ngOnInit",value:function(){}}]),o}();return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-index"]],decls:14,vars:0,consts:[[1,"main-content"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header","card-header-danger"],[1,"card-title"],["mat-mini-fab","","aria-label","Example icon button with a delete icon","routerLink","unos",1,"pull-right"],[1,"card-category"],[1,"card-body"]],template:function(n,a){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h4",6),t._uU(7,"Uplata "),t.TgZ(8,"button",7)(9,"mat-icon"),t._uU(10,"add"),t.qZA()()(),t._UZ(11,"p",8),t.qZA(),t.TgZ(12,"div",9),t._UZ(13,"app-uplata-datatable"),t.qZA()()()()()())},directives:[N.lW,l.rH,G.Hw,X.R],styles:[""]}),e}()},{path:"unos",pathMatch:"full",component:I},{path:":uplataId",component:U},{path:":uplataId/izmena",component:I},{path:":uplataId/brisanje",component:I}],V=function(){var e=(0,f.Z)(function o(){(0,_.Z)(this,o)});return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[l.Bz.forChild(H)],l.Bz]}),e}(),q=r(75383),tt=function(){var e=(0,f.Z)(function o(){(0,_.Z)(this,o)});return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[g.ez,V,q.q,p.u5,p.UX]]}),e}()},33812:function(O,b,r){r.d(b,{J:function(){return U}});var f=r(15671),_=r(43144),g=r(40520),l=r(92340),t=r(91891),U=function(){var m=function(){function d(u){(0,f.Z)(this,d),this.httpClient=u,this.httpOptions={headers:new g.WM({"Content-Type":"application/json"})}}return(0,_.Z)(d,[{key:"datatable",value:function(i){return this.httpClient.post("".concat(l.N.api_url,"/datatable/uplata"),i)}},{key:"all",value:function(){return this.httpClient.get("".concat(l.N.api_url,"/uplata"))}},{key:"find",value:function(i){return this.httpClient.get("".concat(l.N.api_url,"/uplata/").concat(i))}},{key:"store",value:function(i){return this.httpClient.post("".concat(l.N.api_url,"/uplata"),JSON.stringify(i),this.httpOptions)}},{key:"update",value:function(i,v){return this.httpClient.put("".concat(l.N.api_url,"/uplata/").concat(i),JSON.stringify(v),this.httpOptions)}},{key:"delete",value:function(i){return this.httpClient.delete("".concat(l.N.api_url,"/uplata/").concat(i),this.httpOptions)}}]),d}();return m.\u0275fac=function(u){return new(u||m)(t.LFG(g.eN))},m.\u0275prov=t.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m}()}}]);