"use strict";(self.webpackChunkangular=self.webpackChunkangular||[]).push([[388],{72808:function(O,k,l){l.d(k,{n:function(){return Z}});var p=l(15671),f=l(43144),_=l(40520),s=l(92340),b=l(91891),Z=function(){var t=function(){function m(c){(0,p.Z)(this,m),this.httpClient=c,this.httpOptions={headers:new _.WM({"Content-Type":"application/json"})}}return(0,f.Z)(m,[{key:"datatable",value:function(d){return this.httpClient.post("".concat(s.N.api_url,"/datatable/smena"),d)}},{key:"all",value:function(){return this.httpClient.get("".concat(s.N.api_url,"/smena"))}},{key:"find",value:function(d){return this.httpClient.get("".concat(s.N.api_url,"/smena/").concat(d))}},{key:"store",value:function(d){return this.httpClient.post("".concat(s.N.api_url,"/smena"),JSON.stringify(d),this.httpOptions)}},{key:"update",value:function(d,C){return this.httpClient.put("".concat(s.N.api_url,"/smena/").concat(d),JSON.stringify(C),this.httpOptions)}},{key:"delete",value:function(d){return this.httpClient.delete("".concat(s.N.api_url,"/smena/").concat(d),this.httpOptions)}}]),m}();return t.\u0275fac=function(c){return new(c||t)(b.LFG(_.eN))},t.\u0275prov=b.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},65265:function(O,k,l){l.d(k,{M:function(){return Z}});var p=l(15671),f=l(43144),_=l(40520),s=l(92340),b=l(91891),Z=function(){var t=function(){function m(c){(0,p.Z)(this,m),this.httpClient=c,this.httpOptions={headers:new _.WM({"Content-Type":"application/json"})}}return(0,f.Z)(m,[{key:"datatable",value:function(d){return this.httpClient.post("".concat(s.N.api_url,"/datatable/ucesnik"),d)}},{key:"all",value:function(){return this.httpClient.get("".concat(s.N.api_url,"/ucesnik"))}},{key:"find",value:function(d){return this.httpClient.get("".concat(s.N.api_url,"/ucesnik/").concat(d))}},{key:"store",value:function(d){return this.httpClient.post("".concat(s.N.api_url,"/ucesnik"),JSON.stringify(d),this.httpOptions)}},{key:"update",value:function(d,C){return this.httpClient.put("".concat(s.N.api_url,"/ucesnik/id"),JSON.stringify(C),this.httpOptions)}},{key:"delete",value:function(d){return this.httpClient.delete("".concat(s.N.api_url,"/ucesnik/").concat(d),this.httpOptions)}}]),m}();return t.\u0275fac=function(c){return new(c||t)(b.LFG(_.eN))},t.\u0275prov=b.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},88388:function(O,k,l){l.r(k),l.d(k,{ZahtevModule:function(){return mt}});var p=l(43144),f=l(15671),_=l(69808),s=l(74202),b=l(40520),Z=l(92340),t=l(91891),m=function(){var a=function(){function r(n){(0,f.Z)(this,r),this.httpClient=n,this.httpOptions={headers:new b.WM({"Content-Type":"application/json"})}}return(0,p.Z)(r,[{key:"datatable",value:function(e){return this.httpClient.post("".concat(Z.N.api_url,"/datatable/zahtev"),e)}},{key:"all",value:function(){return this.httpClient.get("".concat(Z.N.api_url,"/zahtev"))}},{key:"statusi",value:function(){return this.httpClient.post("".concat(Z.N.api_url,"/zahtev/statusi"),{})}},{key:"find",value:function(e){return this.httpClient.get("".concat(Z.N.api_url,"/zahtev/").concat(e))}},{key:"store",value:function(e){return this.httpClient.post("".concat(Z.N.api_url,"/zahtev"),JSON.stringify(e),this.httpOptions)}},{key:"update",value:function(e,i){return this.httpClient.put("".concat(Z.N.api_url,"/zahtev/").concat(e),JSON.stringify(i),this.httpOptions)}},{key:"update_odgovor",value:function(e,i){return this.httpClient.put("".concat(Z.N.api_url,"/zahtev/").concat(e,"/odgovor"),JSON.stringify(i),this.httpOptions)}},{key:"delete",value:function(e){return this.httpClient.delete("".concat(Z.N.api_url,"/zahtev/").concat(e),this.httpOptions)}}]),r}();return a.\u0275fac=function(n){return new(n||a)(t.LFG(b.eN))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),c=l(47423);function d(a,r){if(1&a&&(t.TgZ(0,"div",2)(1,"div",3)(2,"p")(3,"strong"),t._uU(4,"Odgovor:"),t.qZA()(),t.TgZ(5,"p"),t._uU(6),t.qZA()()()),2&a){var n=t.oxw();t.xp6(6),t.Oqu(null==n.zahtev?null:n.zahtev.odgovor)}}var C=function(){var a=function(){function r(n,e){(0,f.Z)(this,r),this.zahtevService=n,this.activatedRoute=e}return(0,p.Z)(r,[{key:"ngOnInit",value:function(){var i,e=this;this.zahtevService.find(null===(i=this.activatedRoute.snapshot.params)||void 0===i?void 0:i.zahtevId).subscribe(function(o){e.zahtev=o})}}]),r}();return a.\u0275fac=function(n){return new(n||a)(t.Y36(m),t.Y36(s.gz))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-zahtev-details"]],decls:49,vars:9,consts:[[1,"main-content"],[1,"container"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header","card-header-danger"],[1,"card-title"],[1,"card-category"],[1,"card-body"],[1,"col-md-4"],[1,"row","border-bottom"],["class","row",4,"ngIf"],["mat-raised-button","","routerLink","odgovor",1,"btn","btn-danger","pull-right"],[1,"clearfix"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"h4",6),t._uU(9,"Zahtev"),t.qZA(),t.TgZ(10,"p",7),t._uU(11," Status zahteva "),t.TgZ(12,"strong"),t._uU(13),t.qZA()()(),t.TgZ(14,"div",8)(15,"div",2)(16,"div",9)(17,"p"),t._uU(18,"Roditelj: "),t.TgZ(19,"strong"),t._uU(20),t.qZA()()(),t.TgZ(21,"div",9)(22,"p"),t._uU(23,"Kamp: "),t.TgZ(24,"strong"),t._uU(25),t.qZA()()()(),t.TgZ(26,"div",10)(27,"div",9)(28,"p"),t._uU(29,"U\u010desnik "),t.TgZ(30,"strong"),t._uU(31),t.qZA()()(),t.TgZ(32,"div",9)(33,"p"),t._uU(34,"Smena "),t.TgZ(35,"strong"),t._uU(36),t.qZA()()()(),t.TgZ(37,"div",2)(38,"div",3)(39,"p")(40,"strong"),t._uU(41,"Zahtev:"),t.qZA()(),t.TgZ(42,"p"),t._uU(43),t.qZA()()(),t.YNc(44,d,7,1,"div",11),t._UZ(45,"div",10),t.TgZ(46,"a",12),t._uU(47," Odgovori "),t.qZA(),t._UZ(48,"div",13),t.qZA()()()()()()()()),2&n&&(t.xp6(13),t.Oqu(null==e.zahtev||null==e.zahtev.status_zahteva?null:e.zahtev.status_zahteva.naziv),t.xp6(7),t.AsE("",null==e.zahtev||null==e.zahtev.roditelj?null:e.zahtev.roditelj.prezime," ",null==e.zahtev||null==e.zahtev.roditelj?null:e.zahtev.roditelj.ime,""),t.xp6(5),t.Oqu(null==e.zahtev?null:e.zahtev.kamp.naziv),t.xp6(6),t.AsE("",null==e.zahtev||null==e.zahtev.ucesnik?null:e.zahtev.ucesnik.prezime," ",null==e.zahtev||null==e.zahtev.ucesnik?null:e.zahtev.ucesnik.ime,""),t.xp6(5),t.Oqu(null==e.zahtev||null==e.zahtev.smena?null:e.zahtev.smena.naziv),t.xp6(7),t.Oqu(null==e.zahtev?null:e.zahtev.zahtev),t.xp6(1),t.Q6J("ngIf",!(null==e.zahtev||!e.zahtev.odgovor)))},directives:[_.O5,c.zs,s.yS],styles:[""]}),a}(),M=l(45687),A=l(32871),E=l(72808),N=l(65265),h=l(93075),I=l(17585),J=l(57261),y=l(67322),Y=l(74107),q=l(90508),x=l(77531);function R(a,r){1&a&&(t.TgZ(0,"p",23),t._uU(1," Novi unos "),t.qZA())}function B(a,r){1&a&&(t.TgZ(0,"p",23),t._uU(1," Izmena "),t.qZA())}function P(a,r){1&a&&(t.TgZ(0,"p",23),t._uU(1," Brisanje "),t.qZA())}function w(a,r){if(1&a&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&a){var n=r.$implicit;t.Q6J("value",n.id),t.xp6(1),t.AsE("",n.prezime," ",n.ime,"")}}function K(a,r){if(1&a&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&a){var n=r.$implicit;t.Q6J("value",n.id),t.xp6(1),t.AsE("",n.prezime," ",n.ime,"")}}function L(a,r){if(1&a&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&a){var e,n=t.oxw();t.xp6(1),t.hij(" ",null==(e=n.zahtevForm.get("zahtev"))||null==e.errors?null:e.errors.serverError," ")}}function W(a,r){if(1&a&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&a){var n=r.$implicit;t.Q6J("value",n.id),t.xp6(1),t.Oqu(n.naziv)}}function G(a,r){if(1&a&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&a){var n=r.$implicit;t.Q6J("value",n.id),t.xp6(1),t.Oqu(n.naziv)}}function X(a,r){1&a&&(t.TgZ(0,"p",23),t._uU(1," Novi unos "),t.qZA())}function H(a,r){1&a&&(t.TgZ(0,"p",23),t._uU(1," Izmena "),t.qZA())}function V(a,r){1&a&&(t.TgZ(0,"p",23),t._uU(1," Brisanje "),t.qZA())}function tt(a,r){if(1&a&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&a){var e,n=t.oxw(2);t.xp6(1),t.hij(" ",null==(e=n.zahtevForm.get("odgovor"))||null==e.errors?null:e.errors.serverError," ")}}function et(a,r){if(1&a){var n=t.EpF();t.TgZ(0,"div",2)(1,"div",3)(2,"form",4),t.NdJ("ngSubmit",function(){return t.CHM(n),t.oxw().submitForm()}),t.TgZ(3,"div",2)(4,"div",3)(5,"div",5)(6,"div",6)(7,"h4",7),t._uU(8,"Odgovor"),t.qZA(),t.YNc(9,X,2,0,"p",8),t.YNc(10,H,2,0,"p",8),t.YNc(11,V,2,0,"p",8),t.qZA(),t.TgZ(12,"div",9)(13,"div",2)(14,"mat-form-field",10),t._UZ(15,"mat-select",25),t.qZA()(),t.TgZ(16,"div",2)(17,"mat-form-field",14),t._UZ(18,"textarea",26),t.YNc(19,tt,2,1,"mat-error",16),t.qZA()(),t.TgZ(20,"button",20),t.NdJ("click",function(){return t.CHM(n),t.oxw().submitForm()}),t._uU(21," Potvrdi "),t.qZA(),t._UZ(22,"div",21),t.qZA()()()()()()()}if(2&a){var i,e=t.oxw();t.xp6(2),t.Q6J("formGroup",e.odgovorForm),t.xp6(7),t.Q6J("ngIf",e.action_create),t.xp6(1),t.Q6J("ngIf",e.action_update),t.xp6(1),t.Q6J("ngIf",e.action_delete),t.xp6(4),t.Q6J("errorStateMatcher",e.matcher),t.xp6(3),t.Q6J("ngModel",e.zahtev.odgovor)("errorStateMatcher",e.matcher),t.xp6(1),t.Q6J("ngIf",null==(i=e.zahtevForm.get("odgovor"))||null==i.errors?null:i.errors.serverError)}}var F=function(){var a=function(){function r(n,e,i,o,u,v,g,z,T,S,U){(0,f.Z)(this,r),this.fb=n,this.router=e,this.routerExt=i,this.activatedRoute=o,this.roditeljService=u,this.ucesnikService=v,this.kampService=g,this.smenaService=z,this.zahtevService=T,this._location=S,this._snackBar=U,this.matcher=new nt,this.zahtev={zahtev:"",odgovor:"",status_id:1,roditelj_id:"",ucesnik_id:"",kamp_id:"",smena_id:""},this.action_create=!1,this.action_update=!1,this.action_delete=!1,this.kampovi=[],this.kamp_id=null,this.smene=[],this.smena_id=null,this.roditelji=[],this.roditelj_id=null,this.ucesnici=[],this.ucesnik_id=null,this.zahtevForm=function D(a,r){return a.group({zahtev:[""],odgovor:[""],status_id:[""],roditelj_id:[""],ucesnik_id:[""],kamp_id:[""],smena_id:[""]})}(this.fb)}return(0,p.Z)(r,[{key:"ngOnInit",value:function(){var e=this;this.loadFromUrl(),this.zahtevService.statusi().subscribe(function(i){return e.statusi=i}),this.roditeljService.all().subscribe(function(i){return e.roditelji=i}),this.kampService.all().subscribe(function(i){return e.kampovi=i})}},{key:"kamp_changed",value:function(e){var i=this;this.kampService.smene(e.value).subscribe(function(o){return i.smene=o})}},{key:"smena_changed",value:function(){}},{key:"roditelj_changed",value:function(e){var i=this;console.log("roditelj changed"),this.roditeljService.ucesnici(e.value).subscribe(function(o){return i.ucesnici=o})}},{key:"ucesnik_changed",value:function(){}},{key:"store",value:function(){var e=this;!this.action_create||this.zahtevService.store(this.zahtevForm.value).subscribe({next:function(o){e.router.navigateByUrl(e.routerExt.getPreviousUrl())},error:function(o){e.submitFormFailed(e.zahtevForm,o)}})}},{key:"update",value:function(){var e=this;!this.action_update||this.zahtevService.update(this.zahtev.id,this.zahtevForm.value).subscribe({next:function(o){e.router.navigateByUrl(e.routerExt.getPreviousUrl())},error:function(o){e.submitFormFailed(e.zahtevForm,o)}})}},{key:"delete",value:function(){var e=this;!this.action_delete||this.zahtevService.delete(this.zahtev.id).subscribe({next:function(o){e.router.navigateByUrl(e.routerExt.getPreviousUrl())},error:function(o){e.submitFormFailed(e.zahtevForm,o)}})}},{key:"submitForm",value:function(){this.store(),this.update(),this.delete()}},{key:"submitFormFailed",value:function(e,i){422===i.status?Object.keys(i.error.errors).forEach(function(o){var u=e.get(o);u&&u.setErrors({serverError:i.error.errors[o]})}):this._snackBar.open(i.error.message,"OK")}},{key:"goBack",value:function(){this._location.back()}},{key:"loadFromUrl",value:function(){var i,o,e=this;this.action_create=this.activatedRoute.snapshot.url.map(function(u,v,g){return u.path}).includes("unos"),this.action_update=this.activatedRoute.snapshot.url.map(function(u,v,g){return u.path}).includes("izmena"),this.action_delete=this.activatedRoute.snapshot.url.map(function(u,v,g){return u.path}).includes("brisanje"),(null===(i=this.activatedRoute.snapshot.params)||void 0===i?void 0:i.zahtevId)&&this.zahtevService.find(null===(o=this.activatedRoute.snapshot.params)||void 0===o?void 0:o.zahtevId).subscribe(function(u){e.zahtev=u,e.zahtev.kamp_id&&e.kampService.smene(e.zahtev.kamp_id).subscribe(function(v){return e.smene=v}),e.zahtev.roditelj_id&&e.roditeljService.ucesnici(e.zahtev.roditelj_id).subscribe(function(v){return e.ucesnici=v})})}}]),r}();return a.\u0275fac=function(n){return new(n||a)(t.Y36(h.qu),t.Y36(s.F0),t.Y36(I.i),t.Y36(s.gz),t.Y36(A.n),t.Y36(N.M),t.Y36(M.f),t.Y36(E.n),t.Y36(m),t.Y36(_.Ye),t.Y36(J.ux))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-form"]],decls:37,vars:20,consts:[[1,"main-content"],[1,"container"],[1,"row"],[1,"col-md-12"],["novalidate","",3,"formGroup","ngSubmit"],[1,"card"],[1,"card-header","card-header-danger"],[1,"card-title"],["class","card-category",4,"ngIf"],[1,"card-body"],[1,"example-full-width","col-md-6"],["placeholder","Roditelj","formControlName","roditelj_id",3,"ngModel","errorStateMatcher","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["placeholder","U\u010desnik","formControlName","ucesnik_id",3,"ngModel","errorStateMatcher"],[1,"example-full-width","col-md-12"],["matInput","","placeholder","Zahtev","formControlName","zahtev",3,"ngModel","errorStateMatcher"],[4,"ngIf"],[1,"row","border-bottom"],["placeholder","Kamp","formControlName","kamp_id",3,"ngModel","errorStateMatcher","selectionChange"],["placeholder","Smena","formControlName","smena_id",3,"ngModel","errorStateMatcher"],["mat-raised-button","","type","button",1,"btn","btn-danger","pull-right",3,"click"],[1,"clearfix"],["class","row",4,"ngIf"],[1,"card-category"],[3,"value"],["placeholder","Status","formControlName","status_id",3,"errorStateMatcher"],["matInput","","placeholder","Odgovor","formControlName","odgovor",3,"ngModel","errorStateMatcher"]],template:function(n,e){var i;1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4),t.NdJ("ngSubmit",function(){return e.submitForm()}),t.TgZ(5,"div",2)(6,"div",3)(7,"div",5)(8,"div",6)(9,"h4",7),t._uU(10,"Zahtev"),t.qZA(),t.YNc(11,R,2,0,"p",8),t.YNc(12,B,2,0,"p",8),t.YNc(13,P,2,0,"p",8),t.qZA(),t.TgZ(14,"div",9)(15,"div",2)(16,"mat-form-field",10)(17,"mat-select",11),t.NdJ("selectionChange",function(u){return e.roditelj_changed(u)}),t.YNc(18,w,2,3,"mat-option",12),t.qZA()(),t.TgZ(19,"mat-form-field",10)(20,"mat-select",13),t.YNc(21,K,2,3,"mat-option",12),t.qZA()()(),t.TgZ(22,"div",2)(23,"mat-form-field",14),t._UZ(24,"textarea",15),t.YNc(25,L,2,1,"mat-error",16),t.qZA()(),t.TgZ(26,"div",17)(27,"mat-form-field",10)(28,"mat-select",18),t.NdJ("selectionChange",function(u){return e.kamp_changed(u)}),t.YNc(29,W,2,2,"mat-option",12),t.qZA()(),t.TgZ(30,"mat-form-field",10)(31,"mat-select",19),t.YNc(32,G,2,2,"mat-option",12),t.qZA()()(),t.TgZ(33,"button",20),t.NdJ("click",function(){return e.submitForm()}),t._uU(34," Potvrdi "),t.qZA(),t._UZ(35,"div",21),t.qZA()()()()()()(),t.YNc(36,et,23,8,"div",22),t.qZA()()),2&n&&(t.xp6(4),t.Q6J("formGroup",e.zahtevForm),t.xp6(7),t.Q6J("ngIf",e.action_create),t.xp6(1),t.Q6J("ngIf",e.action_update),t.xp6(1),t.Q6J("ngIf",e.action_delete),t.xp6(4),t.Q6J("ngModel",e.zahtev.roditelj_id)("errorStateMatcher",e.matcher),t.xp6(1),t.Q6J("ngForOf",e.roditelji),t.xp6(2),t.Q6J("ngModel",e.zahtev.ucesnik_id)("errorStateMatcher",e.matcher),t.xp6(1),t.Q6J("ngForOf",e.ucesnici),t.xp6(3),t.Q6J("ngModel",e.zahtev.zahtev)("errorStateMatcher",e.matcher),t.xp6(1),t.Q6J("ngIf",null==(i=e.zahtevForm.get("zahtev"))||null==i.errors?null:i.errors.serverError),t.xp6(3),t.Q6J("ngModel",e.zahtev.kamp_id)("errorStateMatcher",e.matcher),t.xp6(1),t.Q6J("ngForOf",e.kampovi),t.xp6(2),t.Q6J("ngModel",e.zahtev.smena_id)("errorStateMatcher",e.matcher),t.xp6(1),t.Q6J("ngForOf",e.smene),t.xp6(4),t.Q6J("ngIf",!e.action_create))},directives:[h._Y,h.JL,h.sg,_.O5,y.KE,Y.gD,h.JJ,h.u,_.sg,q.ey,x.Nt,h.Fj,y.TO,c.lW],styles:[""]}),a}(),nt=function(){function a(){(0,f.Z)(this,a)}return(0,p.Z)(a,[{key:"isErrorState",value:function(n,e){return n&&n.invalid}}]),a}(),at=l(25245),it=["dataTableZahtev"],rt=function(){var a=function(){function r(n,e,i){(0,f.Z)(this,r),this.router=n,this.activatedRoute=e,this.zahtevService=i}return(0,p.Z)(r,[{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){var e=this,i=this;this.dataTable=$(this.table.nativeElement),this.dataTable.DataTable({ajax:function(u,v){var g;u.kamp_id=null===(g=e.activatedRoute.snapshot.parent.params)||void 0===g?void 0:g.kampId,e.zahtevService.datatable(u).subscribe(function(z){v({recordsTotal:z.recordsTotal,recordsFiltered:z.recordsFiltered,data:z.data,kamp_id:z.kamp_id})})},responsive:!0,autoWidth:!1,buttons:{buttons:[{text:'<i class="fas fa-plus"></i>',action:function(u,v,g,z){i.router.navigateByUrl("/korisnici/create")},className:"btn btn-primary"}],dom:{button:{className:"btn"}}},columns:[{title:"Roditelj",data:"roditelj",name:"roditeljs.prezime"},{title:"U\u010desnik",data:"ucesnik",name:"ucesniks.prezime"},{title:"Zahtev",data:"zahtev",name:"zahtev"},{title:"Status",data:"status_zahteva",name:"status_zahtevas.naziv"},{title:"Akcije",data:"action",name:"action",width:"120px"}],initComplete:function(u,v){i.dataTable.DataTable().columns(0).visible(null==v.kamp_id)},drawCallback:function(){$(".btnShowZahtev").on("click",function(u){i.router.navigateByUrl("/admin/zahtev/".concat($(this).data("id")))}),$(".btnEditZahtev").on("click",function(u){i.router.navigateByUrl("/admin/zahtev/".concat($(this).data("id"),"/izmena"))}),$(".btnDeleteZahtev").on("click",function(u){i.router.navigateByUrl("/admin/zahtev/".concat($(this).data("id"),"/brisanje"))})}}).buttons().container().appendTo("#datatable_smena_wrapper .col-md-6:eq(0)")}}]),r}();return a.\u0275fac=function(n){return new(n||a)(t.Y36(s.F0),t.Y36(s.gz),t.Y36(m))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-zahtev-datatable"]],viewQuery:function(n,e){var i;1&n&&t.Gf(it,5),2&n&&t.iGM(i=t.CRH())&&(e.table=i.first)},inputs:{kamp_id:"kamp_id",smena_id:"smena_id"},decls:3,vars:0,consts:[[1,"table-responsive"],["id","datatable_zahtev",1,"table","table-bordered","table-striped","table-sm"],["dataTableZahtev",""]],template:function(n,e){1&n&&(t.TgZ(0,"div",0),t._UZ(1,"table",1,2),t.qZA())},styles:[""]}),a}(),ot=function(){var a=function(){function r(n,e){(0,f.Z)(this,r),this.router=n,this.zahtevService=e,this.kamp_id=null,this.smena_id=null}return(0,p.Z)(r,[{key:"ngOnInit",value:function(){}}]),r}();return a.\u0275fac=function(n){return new(n||a)(t.Y36(s.F0),t.Y36(m))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-index"]],decls:14,vars:2,consts:[[1,"main-content"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header","card-header-danger"],[1,"card-title"],["mat-mini-fab","","aria-label","Example icon button with a delete icon","routerLink","unos",1,"pull-right"],[1,"card-category"],[1,"card-body"],[3,"kamp_id","smena_id"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h4",6),t._uU(7,"Zahtevi "),t.TgZ(8,"button",7)(9,"mat-icon"),t._uU(10,"add"),t.qZA()()(),t._UZ(11,"p",8),t.qZA(),t.TgZ(12,"div",9),t._UZ(13,"app-zahtev-datatable",10),t.qZA()()()()()()),2&n&&(t.xp6(13),t.Q6J("kamp_id",e.kamp_id)("smena_id",e.smena_id))},directives:[c.lW,s.rH,at.Hw,rt],styles:[""]}),a}();function ut(a,r){if(1&a&&(t.TgZ(0,"mat-option",19),t._uU(1),t.qZA()),2&a){var n=r.$implicit;t.Q6J("value",n.id),t.xp6(1),t.Oqu(n.naziv)}}function lt(a,r){if(1&a&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&a){var e,n=t.oxw();t.xp6(1),t.hij(" ",null==(e=n.odgovorForm.get("odgovor"))||null==e.errors?null:e.errors.serverError," ")}}var st=function(){var a=function(){function r(n,e,i,o,u,v,g,z,T,S,U){(0,f.Z)(this,r),this.fb=n,this.router=e,this.routerExt=i,this.activatedRoute=o,this.roditeljService=u,this.ucesnikService=v,this.kampService=g,this.smenaService=z,this.zahtevService=T,this._location=S,this._snackBar=U,this.matcher=new ct,this.zahtev={zahtev:"",odgovor:"",status_id:1,roditelj_id:"",ucesnik_id:"",kamp_id:"",smena_id:""},this.action_create=!1,this.action_update=!1,this.action_delete=!1,this.kampovi=[],this.kamp_id=null,this.smene=[],this.smena_id=null,this.roditelji=[],this.roditelj_id=null,this.ucesnici=[],this.ucesnik_id=null,this.odgovorForm=function Q(a,r){return a.group({odgovor:[""],status_id:[""]})}(this.fb)}return(0,p.Z)(r,[{key:"ngOnInit",value:function(){var e=this;this.loadFromUrl(),this.zahtevService.statusi().subscribe(function(i){return e.statusi=i})}},{key:"kamp_changed",value:function(e){var i=this;this.kampService.smene(e.value).subscribe(function(o){return i.smene=o})}},{key:"smena_changed",value:function(){}},{key:"roditelj_changed",value:function(e){var i=this;console.log("roditelj changed"),this.roditeljService.ucesnici(e.value).subscribe(function(o){return i.ucesnici=o})}},{key:"ucesnik_changed",value:function(){}},{key:"store",value:function(){var e=this;!this.action_create||this.zahtevService.store(this.zahtevForm.value).subscribe({next:function(o){e.router.navigateByUrl(e.routerExt.getPreviousUrl())},error:function(o){e.submitFormFailed(e.zahtevForm,o)}})}},{key:"update",value:function(){var e=this;!this.action_update||this.zahtevService.update_odgovor(this.zahtev.id,this.odgovorForm.value).subscribe({next:function(o){e.router.navigateByUrl("/admin/zahtevi")},error:function(o){e.submitFormFailed(e.zahtevForm,o)}})}},{key:"delete",value:function(){var e=this;!this.action_delete||this.zahtevService.delete(this.zahtev.id).subscribe({next:function(o){e.router.navigateByUrl(e.routerExt.getPreviousUrl())},error:function(o){e.submitFormFailed(e.zahtevForm,o)}})}},{key:"submitForm",value:function(){this.store(),this.update(),this.delete()}},{key:"submitFormFailed",value:function(e,i){422===i.status?Object.keys(i.error.errors).forEach(function(o){var u=e.get(o);u&&u.setErrors({serverError:i.error.errors[o]})}):this._snackBar.open(i.error.message,"OK")}},{key:"goBack",value:function(){this._location.back()}},{key:"loadFromUrl",value:function(){var i,o,e=this;this.action_create=this.activatedRoute.snapshot.url.map(function(u,v,g){return u.path}).includes("unos"),this.action_update=this.activatedRoute.snapshot.url.map(function(u,v,g){return u.path}).includes("izmena"),this.action_delete=this.activatedRoute.snapshot.url.map(function(u,v,g){return u.path}).includes("brisanje"),this.action_update=!0,(null===(i=this.activatedRoute.snapshot.params)||void 0===i?void 0:i.zahtevId)&&this.zahtevService.find(null===(o=this.activatedRoute.snapshot.params)||void 0===o?void 0:o.zahtevId).subscribe(function(u){e.zahtev=u,e.zahtev.kamp_id&&e.kampService.smene(e.zahtev.kamp_id).subscribe(function(v){return e.smene=v}),e.zahtev.roditelj_id&&e.roditeljService.ucesnici(e.zahtev.roditelj_id).subscribe(function(v){return e.ucesnici=v})})}}]),r}();return a.\u0275fac=function(n){return new(n||a)(t.Y36(h.qu),t.Y36(s.F0),t.Y36(I.i),t.Y36(s.gz),t.Y36(A.n),t.Y36(N.M),t.Y36(M.f),t.Y36(E.n),t.Y36(m),t.Y36(_.Ye),t.Y36(J.ux))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-odgovor-form"]],decls:52,vars:14,consts:[[1,"main-content"],[1,"container"],[1,"row"],[1,"col-md-12"],["novalidate","",3,"formGroup","ngSubmit"],[1,"card"],[1,"card-header","card-header-danger"],[1,"card-title"],[1,"card-body"],[1,"col-md-4"],[1,"row","border-bottom"],[1,"example-full-width","col-md-6"],["placeholder","Status","formControlName","status_id",3,"ngModel","errorStateMatcher"],[3,"value",4,"ngFor","ngForOf"],[1,"example-full-width","col-md-12"],["matInput","","placeholder","Odgovor","formControlName","odgovor",3,"ngModel","errorStateMatcher"],[4,"ngIf"],["mat-raised-button","","type","button",1,"btn","btn-danger","pull-right",3,"click"],[1,"clearfix"],[3,"value"]],template:function(n,e){var i;1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4),t.NdJ("ngSubmit",function(){return e.submitForm()}),t.TgZ(5,"div",2)(6,"div",3)(7,"div",5)(8,"div",6)(9,"h4",7),t._uU(10,"Odgovor"),t.qZA()(),t.TgZ(11,"div",8)(12,"div",2)(13,"div",9)(14,"p"),t._uU(15,"Roditelj: "),t.TgZ(16,"strong"),t._uU(17),t.qZA()()(),t.TgZ(18,"div",9)(19,"p"),t._uU(20,"Kamp: "),t.TgZ(21,"strong"),t._uU(22),t.qZA()()()(),t.TgZ(23,"div",10)(24,"div",9)(25,"p"),t._uU(26,"U\u010desnik "),t.TgZ(27,"strong"),t._uU(28),t.qZA()()(),t.TgZ(29,"div",9)(30,"p"),t._uU(31,"Smena "),t.TgZ(32,"strong"),t._uU(33),t.qZA()()()(),t.TgZ(34,"div",2)(35,"div",3)(36,"p")(37,"strong"),t._uU(38,"Zahtev:"),t.qZA()(),t.TgZ(39,"p"),t._uU(40),t.qZA()()(),t.TgZ(41,"div",2)(42,"mat-form-field",11)(43,"mat-select",12),t.YNc(44,ut,2,2,"mat-option",13),t.qZA()()(),t.TgZ(45,"div",2)(46,"mat-form-field",14),t._UZ(47,"textarea",15),t.YNc(48,lt,2,1,"mat-error",16),t.qZA()(),t.TgZ(49,"button",17),t.NdJ("click",function(){return e.submitForm()}),t._uU(50," Potvrdi "),t.qZA(),t._UZ(51,"div",18),t.qZA()()()()()()()()()),2&n&&(t.xp6(4),t.Q6J("formGroup",e.odgovorForm),t.xp6(13),t.AsE("",null==e.zahtev||null==e.zahtev.roditelj?null:e.zahtev.roditelj.prezime," ",null==e.zahtev||null==e.zahtev.roditelj?null:e.zahtev.roditelj.ime,""),t.xp6(5),t.Oqu(null==e.zahtev?null:e.zahtev.kamp.naziv),t.xp6(6),t.AsE("",null==e.zahtev||null==e.zahtev.ucesnik?null:e.zahtev.ucesnik.prezime," ",null==e.zahtev||null==e.zahtev.ucesnik?null:e.zahtev.ucesnik.ime,""),t.xp6(5),t.Oqu(null==e.zahtev||null==e.zahtev.smena?null:e.zahtev.smena.naziv),t.xp6(7),t.Oqu(null==e.zahtev?null:e.zahtev.zahtev),t.xp6(3),t.Q6J("ngModel",e.zahtev.status_id)("errorStateMatcher",e.matcher),t.xp6(1),t.Q6J("ngForOf",e.statusi),t.xp6(3),t.Q6J("ngModel",e.zahtev.odgovor)("errorStateMatcher",e.matcher),t.xp6(1),t.Q6J("ngIf",null==(i=e.odgovorForm.get("odgovor"))||null==i.errors?null:i.errors.serverError))},directives:[h._Y,h.JL,h.sg,y.KE,Y.gD,h.JJ,h.u,_.sg,q.ey,x.Nt,h.Fj,_.O5,y.TO,c.lW],styles:[""]}),a}(),ct=function(){function a(){(0,f.Z)(this,a)}return(0,p.Z)(a,[{key:"isErrorState",value:function(n,e){return n&&n.invalid}}]),a}(),vt=[{path:"",pathMatch:"full",component:ot},{path:"unos",pathMatch:"full",component:F},{path:":zahtevId",component:C},{path:":zahtevId/izmena",component:F},{path:":zahtevId/brisanje",component:F},{path:":zahtevId/odgovor",component:st}],dt=function(){var a=(0,p.Z)(function r(){(0,f.Z)(this,r)});return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[s.Bz.forChild(vt)],s.Bz]}),a}(),ht=l(75383),mt=function(){var a=(0,p.Z)(function r(){(0,f.Z)(this,r)});return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[_.ez,dt,ht.q,h.u5,h.UX]]}),a}()}}]);