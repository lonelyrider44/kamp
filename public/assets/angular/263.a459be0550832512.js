"use strict";(self.webpackChunkangular=self.webpackChunkangular||[]).push([[263],{54263:function(z,g,l){l.r(g),l.d(g,{KorisnikModule:function(){return Q}});var m=l(43144),d=l(15671),k=l(69808),f=l(74202),r=l(91891),x=function(){var e=function(){function i(){(0,d.Z)(this,i)}return(0,m.Z)(i,[{key:"ngOnInit",value:function(){}}]),i}();return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-details"]],decls:2,vars:0,template:function(n,t){1&n&&(r.TgZ(0,"p"),r._uU(1,"details works!"),r.qZA())},styles:[""]}),e}(),Z=l(40520),h=l(92340),y=function(){var e=function(){function i(n){(0,d.Z)(this,i),this.httpClient=n,this.httpOptions={headers:new Z.WM({"Content-Type":"application/json"})}}return(0,m.Z)(i,[{key:"datatable",value:function(t){return this.httpClient.post("".concat(h.N.api_url,"/datatable/korisnik"),t)}},{key:"all",value:function(){return this.httpClient.get("".concat(h.N.api_url,"/korisnik"))}},{key:"find",value:function(t){return this.httpClient.get("".concat(h.N.api_url,"/korisnik/").concat(t))}},{key:"store",value:function(t){return this.httpClient.post("".concat(h.N.api_url,"/korisnik"),JSON.stringify(t),this.httpOptions)}},{key:"update",value:function(t,o){return this.httpClient.put("".concat(h.N.api_url,"/korisnik/id"),JSON.stringify(o),this.httpOptions)}},{key:"delete",value:function(t){return this.httpClient.delete("".concat(h.N.api_url,"/korisnik/").concat(t),this.httpOptions)}}]),i}();return e.\u0275fac=function(n){return new(n||e)(r.LFG(Z.eN))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),u=l(93075),b=l(67322),T=l(77531),F=l(47423);function S(e,i){if(1&e&&(r.TgZ(0,"mat-error"),r._uU(1),r.qZA()),2&e){var t,n=r.oxw();r.xp6(1),r.hij(" ",null==(t=n.korisnikForm.get("ime"))||null==t.errors?null:t.errors.serverError," ")}}function I(e,i){if(1&e&&(r.TgZ(0,"mat-error"),r._uU(1),r.qZA()),2&e){var t,n=r.oxw();r.xp6(1),r.hij(" ",null==(t=n.korisnikForm.get("prezime"))||null==t.errors?null:t.errors.serverError," ")}}function M(e,i){if(1&e&&(r.TgZ(0,"mat-error"),r._uU(1),r.qZA()),2&e){var t,n=r.oxw();r.xp6(1),r.hij(" ",null==(t=n.korisnikForm.get("role_id"))||null==t.errors?null:t.errors.serverError," ")}}function U(e,i){if(1&e&&(r.TgZ(0,"mat-error"),r._uU(1),r.qZA()),2&e){var t,n=r.oxw();r.xp6(1),r.hij(" ",null==(t=n.korisnikForm.get("email"))||null==t.errors?null:t.errors.serverError," ")}}function A(e,i){if(1&e&&(r.TgZ(0,"mat-error"),r._uU(1),r.qZA()),2&e){var t,n=r.oxw();r.xp6(1),r.hij(" ",null==(t=n.korisnikForm.get("telefon"))||null==t.errors?null:t.errors.serverError," ")}}function E(e,i){if(1&e&&(r.TgZ(0,"mat-error"),r._uU(1),r.qZA()),2&e){var t,n=r.oxw();r.xp6(1),r.hij(" ",null==(t=n.korisnikForm.get("slika"))||null==t.errors?null:t.errors.serverError," ")}}var C=function(){var e=function(){function i(n,t,o,a,s){(0,d.Z)(this,i),this.fb=n,this.router=t,this.activatedRoute=o,this.korisnikService=a,this._location=s,this.korisnik={email:null,user_type:null},this.action="",this.isReadOnly=!1,this.matcher=new N,this.korisnikForm=this.fb.group({ime:[""],prezime:[""],role_id:[""],email:[""],telefon:[""]})}return(0,m.Z)(i,[{key:"ngOnInit",value:function(){var t=this;this.action=this.activatedRoute.snapshot.url[1].path,this.isReadOnly="delete"==this.action,this.activatedRoute.snapshot.url[2]&&this.korisnikService.find(this.activatedRoute.snapshot.url[2].path).subscribe(function(o){t.korisnik=o})}},{key:"store",value:function(){var t=this;"unos"==this.action&&this.korisnikService.store(this.korisnikForm.value).subscribe({next:function(a){t.router.navigateByUrl("/domeni/home")},error:function(a){t.submitFormFailed(t.korisnikForm,a)}})}},{key:"update",value:function(){var t=this;"izmena"==this.action&&this.korisnikService.update(this.korisnik.id,this.korisnikForm.value).subscribe({next:function(a){t.router.navigateByUrl("/domeni/home")},error:function(a){t.submitFormFailed(t.korisnikForm,a)}})}},{key:"delete",value:function(){var t=this;"brisanje"==this.action&&this.korisnikService.delete(this.korisnik.id).subscribe({next:function(a){t.router.navigateByUrl("/domeni/home")},error:function(a){t.submitFormFailed(t.korisnikForm,a)}})}},{key:"submitForm",value:function(){this.store(),this.update(),this.delete()}},{key:"submitFormFailed",value:function(t,o){422===o.status&&Object.keys(o.error.errors).forEach(function(a){var s=t.get(a);s&&s.setErrors({serverError:o.error.errors[a]})})}},{key:"goBack",value:function(){this._location.back()}}]),i}();return e.\u0275fac=function(n){return new(n||e)(r.Y36(u.qu),r.Y36(f.F0),r.Y36(f.gz),r.Y36(y),r.Y36(k.Ye))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-form"]],decls:40,vars:12,consts:[[1,"main-content"],[1,"container-fluid"],[1,"row"],[1,"col-md-8"],[1,"card"],[1,"card-header","card-header-danger"],[1,"card-title"],[1,"card-category"],[1,"card-body"],[1,"col-md-6"],[1,"example-full-width"],["matInput","","placeholder","Ime","formControlName","ime",3,"errorStateMatcher"],[4,"ngIf"],["matInput","","placeholder","Prezime","formControlName","prezime",3,"errorStateMatcher"],["matInput","","placeholder","Uloga","formControlName","role_id",3,"errorStateMatcher"],["matInput","","placeholder","Email","formControlName","email",3,"errorStateMatcher"],["matInput","","placeholder","Telefon","formControlName","telefon",3,"errorStateMatcher"],["matInput","","placeholder","Slika","formControlName","slika",3,"errorStateMatcher"],["mat-raised-button","","type","submit",1,"btn","btn-danger","pull-right"],[1,"clearfix"]],template:function(n,t){var o,a,s,v,c,p;1&n&&(r.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h4",6),r._uU(7,"Korisnik"),r.qZA(),r.TgZ(8,"p",7),r._uU(9,"Complete your profile"),r.qZA()(),r.TgZ(10,"div",8)(11,"form")(12,"div",2)(13,"div",9)(14,"mat-form-field",10),r._UZ(15,"input",11),r.YNc(16,S,2,1,"mat-error",12),r.qZA()(),r.TgZ(17,"div",9)(18,"mat-form-field",10),r._UZ(19,"input",13),r.YNc(20,I,2,1,"mat-error",12),r.qZA()(),r.TgZ(21,"div",9)(22,"mat-form-field",10),r._UZ(23,"input",14),r.YNc(24,M,2,1,"mat-error",12),r.qZA()(),r.TgZ(25,"div",9)(26,"mat-form-field",10),r._UZ(27,"input",15),r.YNc(28,U,2,1,"mat-error",12),r.qZA()(),r.TgZ(29,"div",9)(30,"mat-form-field",10),r._UZ(31,"input",16),r.YNc(32,A,2,1,"mat-error",12),r.qZA()(),r.TgZ(33,"div",9)(34,"mat-form-field",10),r._UZ(35,"input",17),r.YNc(36,E,2,1,"mat-error",12),r.qZA()()(),r.TgZ(37,"button",18),r._uU(38,"Potvrdi"),r.qZA(),r._UZ(39,"div",19),r.qZA()()()()()()()),2&n&&(r.xp6(15),r.Q6J("errorStateMatcher",t.matcher),r.xp6(1),r.Q6J("ngIf",null==(o=t.korisnikForm.get("ime"))||null==o.errors?null:o.errors.serverError),r.xp6(3),r.Q6J("errorStateMatcher",t.matcher),r.xp6(1),r.Q6J("ngIf",null==(a=t.korisnikForm.get("prezime"))||null==a.errors?null:a.errors.serverError),r.xp6(3),r.Q6J("errorStateMatcher",t.matcher),r.xp6(1),r.Q6J("ngIf",null==(s=t.korisnikForm.get("role_id"))||null==s.errors?null:s.errors.serverError),r.xp6(3),r.Q6J("errorStateMatcher",t.matcher),r.xp6(1),r.Q6J("ngIf",null==(v=t.korisnikForm.get("email"))||null==v.errors?null:v.errors.serverError),r.xp6(3),r.Q6J("errorStateMatcher",t.matcher),r.xp6(1),r.Q6J("ngIf",null==(c=t.korisnikForm.get("telefon"))||null==c.errors?null:c.errors.serverError),r.xp6(3),r.Q6J("errorStateMatcher",t.matcher),r.xp6(1),r.Q6J("ngIf",null==(p=t.korisnikForm.get("slika"))||null==p.errors?null:p.errors.serverError))},directives:[u._Y,u.JL,u.F,b.KE,T.Nt,u.Fj,u.JJ,u.u,k.O5,b.TO,F.lW],styles:[""]}),e}(),N=function(){function e(){(0,d.Z)(this,e)}return(0,m.Z)(e,[{key:"isErrorState",value:function(n,t){return n&&n.invalid}}]),e}(),K=l(25245),J=["dataTableKorisnik"],Y=[{path:"",pathMatch:"full",component:function(){var e=function(){function i(n,t){(0,d.Z)(this,i),this.router=n,this.korisnikService=t}return(0,m.Z)(i,[{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){var t=this,o=this;this.dataTable=$(this.table.nativeElement),this.dataTable.DataTable({ajax:function(s,v){t.korisnikService.datatable(s).subscribe(function(c){v({recordsTotal:c.recordsTotal,recordsFiltered:c.recordsFiltered,data:c.data})})},responsive:!0,autoWidth:!1,buttons:{buttons:[{text:'<i class="fas fa-plus"></i>',action:function(s,v,c,p){o.router.navigateByUrl("/korisnici/create")},className:"btn btn-primary"}],dom:{button:{className:"btn"}}},columns:[{title:"ID",data:"id",name:"id"},{title:"Email",data:"email",name:"email"},{title:"Akcije",data:"action",name:"action",width:"10%"}],drawCallback:function(){$(".btnEditKorisnik").on("click",function(s){o.router.navigateByUrl("/korisnici/update/".concat($(this).data("id")))}),$(".btnRemoveKorisnik").on("click",function(s){o.router.navigateByUrl("/korisnici/delete/".concat($(this).data("id")))})}}).buttons().container().appendTo("#datatable_korisnik_wrapper .col-md-6:eq(0)")}}]),i}();return e.\u0275fac=function(n){return new(n||e)(r.Y36(f.F0),r.Y36(y))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-index"]],viewQuery:function(n,t){var o;1&n&&r.Gf(J,5),2&n&&r.iGM(o=r.CRH())&&(t.table=o.first)},decls:16,vars:0,consts:[[1,"main-content"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header","card-header-danger"],[1,"card-title"],["mat-mini-fab","","aria-label","Example icon button with a delete icon","routerLink","unos",1,"pull-right"],[1,"card-category"],[1,"card-body"],[1,"table-responsive"],["id","datatable_korisnik",1,"table","table-bordered","table-striped","table-sm"],["dataTableKorisnik",""]],template:function(n,t){1&n&&(r.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h4",6),r._uU(7,"Korisnici "),r.TgZ(8,"button",7)(9,"mat-icon"),r._uU(10,"add"),r.qZA()()(),r._UZ(11,"p",8),r.qZA(),r.TgZ(12,"div",9)(13,"div",10),r._UZ(14,"table",11,12),r.qZA()()()()()()())},directives:[F.lW,f.rH,K.Hw],styles:[""]}),e}()},{path:"unos",pathMatch:"full",component:C},{path:":korisnikId",component:x},{path:":korisnikId/izmena",component:C}],j=function(){var e=(0,m.Z)(function i(){(0,d.Z)(this,i)});return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[f.Bz.forChild(Y)],f.Bz]}),e}(),w=l(62753),Q=function(){var e=(0,m.Z)(function i(){(0,d.Z)(this,i)});return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[k.ez,j,w.q,u.u5,u.UX]]}),e}()}}]);