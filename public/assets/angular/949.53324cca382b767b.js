"use strict";(self.webpackChunkangular=self.webpackChunkangular||[]).push([[949],{72808:function(O,Z,r){r.d(Z,{n:function(){return F}});var g=r(15671),C=r(43144),_=r(40520),s=r(92340),t=r(91891),F=function(){var p=function(){function d(m){(0,g.Z)(this,d),this.httpClient=m,this.httpOptions={headers:new _.WM({"Content-Type":"application/json"})}}return(0,C.Z)(d,[{key:"datatable",value:function(l){return this.httpClient.post("".concat(s.N.api_url,"/datatable/smena"),l)}},{key:"all",value:function(){return this.httpClient.get("".concat(s.N.api_url,"/smena"))}},{key:"find",value:function(l){return this.httpClient.get("".concat(s.N.api_url,"/smena/").concat(l))}},{key:"store",value:function(l){return this.httpClient.post("".concat(s.N.api_url,"/smena"),JSON.stringify(l),this.httpOptions)}},{key:"update",value:function(l,c){return this.httpClient.put("".concat(s.N.api_url,"/smena/").concat(l),JSON.stringify(c),this.httpOptions)}},{key:"delete",value:function(l){return this.httpClient.delete("".concat(s.N.api_url,"/smena/").concat(l),this.httpOptions)}},{key:"ucesnici",value:function(l){return this.httpClient.get("".concat(s.N.api_url,"/smena/").concat(l,"/ucesnici"))}}]),d}();return p.\u0275fac=function(m){return new(m||p)(t.LFG(_.eN))},p.\u0275prov=t.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p}()},28387:function(O,Z,r){r.d(Z,{R:function(){return p}});var g=r(15671),C=r(43144),_=r(33812),s=r(91891),t=r(74202),F=["dataTableUplata"],p=function(){var d=function(){function m(l,c,f){(0,g.Z)(this,m),this.router=l,this.activatedRoute=c,this.uplataService=f}return(0,C.Z)(m,[{key:"ngOnInit",value:function(){var c,f;this.kamp_id=null===(c=this.activatedRoute.snapshot.parent.params)||void 0===c?void 0:c.kampId,this.smena_id=null===(f=this.activatedRoute.snapshot.parent.params)||void 0===f?void 0:f.smenaId}},{key:"ngOnChanges",value:function(c){this.dataTable&&this.dataTable.DataTable().ajax.reload()}},{key:"ngAfterViewInit",value:function(){var c=this,f=this;this.dataTable=$(this.table.nativeElement),this.dataTable.DataTable({ajax:function(b,k){b.kamp_id=c.kamp_id,b.smena_id=c.smena_id,c.uplataService.datatable(b).subscribe(function(T){k({recordsTotal:T.recordsTotal,recordsFiltered:T.recordsFiltered,data:T.data,kamp_id:T.kamp_id})})},responsive:!0,autoWidth:!1,buttons:{buttons:[{text:'<i class="fas fa-plus"></i>',action:function(b,k,T,E){f.router.navigateByUrl("/korisnici/create")},className:"btn btn-primary"}],dom:{button:{className:"btn"}}},columns:[{title:"Kamp",data:"kamp",name:"kamps.naziv"},{title:"Smena",data:"smena",name:"smenas.naziv"},{title:"U\u010desnik",data:"ucesnik",name:"ucesniks.prezime"},{title:"Datum uplate",data:"datum_uplate",name:"datum_uplate",className:"dt-center"},{title:"Iznos",data:"iznos",name:"iznos_rsd",className:"dt-right"},{title:"Akcije",data:"action",name:"action",width:"10%",className:"dt-center"}],initComplete:function(b,k){f.dataTable.DataTable().columns(0).visible(null==k.kamp_id)},drawCallback:function(){$(".btnEditUplata").on("click",function(b){f.router.navigateByUrl("admin/uplata/".concat($(this).data("id"),"/izmena"))}),$(".btnDeleteUplata").on("click",function(b){f.router.navigateByUrl("admin/uplata/".concat($(this).data("id"),"/brisanje"))})},language:{url:"//cdn.datatables.net/plug-ins/1.12.1/i18n/sr-SP.json"}}).buttons().container().appendTo("#datatable_uplata_wrapper .col-md-6:eq(0)")}}]),m}();return d.\u0275fac=function(l){return new(l||d)(s.Y36(t.F0),s.Y36(t.gz),s.Y36(_.J))},d.\u0275cmp=s.Xpm({type:d,selectors:[["app-uplata-datatable"]],viewQuery:function(l,c){var f;1&l&&s.Gf(F,5),2&l&&s.iGM(f=s.CRH())&&(c.table=f.first)},inputs:{kamp_id:"kamp_id",smena_id:"smena_id"},features:[s.TTD],decls:3,vars:0,consts:[[1,"table-responsive"],["id","datatable_uplata",1,"table","table-bordered","table-striped","table-sm"],["dataTableUplata",""]],template:function(l,c){1&l&&(s.TgZ(0,"div",0),s._UZ(1,"table",1,2),s.qZA())},styles:[""]}),d}()},64949:function(O,Z,r){r.r(Z),r.d(Z,{UplataModule:function(){return nt}});var g=r(43144),C=r(15671),_=r(69808),s=r(74202),t=r(91891),F=function(){var a=function(){function o(){(0,C.Z)(this,o)}return(0,g.Z)(o,[{key:"ngOnInit",value:function(){}}]),o}();return a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-details"]],decls:2,vars:0,template:function(n,e){1&n&&(t.TgZ(0,"p"),t._uU(1,"details works!"),t.qZA())},styles:[""]}),a}(),p=r(19916),d=r(59030),m=r(72808),f=r(33812),v=r(93075),b=r(57261),k=r(67322),T=r(74107),E=r(90508),J=r(77531),I=r(86856),x=r(77446),N=r(47423);function z(a,o){1&a&&(t.TgZ(0,"p",28),t._uU(1," Novi unos "),t.qZA())}function R(a,o){1&a&&(t.TgZ(0,"p",28),t._uU(1," Izmena "),t.qZA())}function Q(a,o){1&a&&(t.TgZ(0,"p",28),t._uU(1," Brisanje "),t.qZA())}function B(a,o){if(1&a&&(t.TgZ(0,"mat-option",29),t._uU(1),t.qZA()),2&a){var n=o.$implicit;t.Q6J("value",n.id),t.xp6(1),t.Oqu(n.naziv)}}function P(a,o){if(1&a&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&a){var e,n=t.oxw();t.xp6(1),t.hij(" ",null==(e=n.uplataForm.get("kamp_id"))||null==e.errors?null:e.errors.serverError," ")}}function Y(a,o){if(1&a&&(t.TgZ(0,"mat-option",29),t._uU(1),t.qZA()),2&a){var n=o.$implicit;t.Q6J("value",n.id),t.xp6(1),t.Oqu(n.naziv)}}function j(a,o){if(1&a&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&a){var e,n=t.oxw();t.xp6(1),t.hij(" ",null==(e=n.uplataForm.get("smena_id"))||null==e.errors?null:e.errors.serverError," ")}}function W(a,o){if(1&a&&(t.TgZ(0,"mat-option",29),t._uU(1),t.qZA()),2&a){var n=o.$implicit;t.Q6J("value",n.id),t.xp6(1),t.lnq("",n.prezime," ",n.ime," (",n.jmbg_pasos,")")}}function K(a,o){if(1&a&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&a){var e,n=t.oxw();t.xp6(1),t.hij(" ",null==(e=n.uplataForm.get("ucesnik_id"))||null==e.errors?null:e.errors.serverError," ")}}function L(a,o){if(1&a&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&a){var e,n=t.oxw();t.xp6(1),t.hij(" ",null==(e=n.uplataForm.get("iznos_rsd"))||null==e.errors?null:e.errors.serverError," ")}}function q(a,o){if(1&a&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&a){var e,n=t.oxw();t.xp6(1),t.hij(" ",null==(e=n.uplataForm.get("iznos_rsd"))||null==e.errors?null:e.errors.serverError," ")}}var A=function(){var a=function(){function o(n,e,u,i,h,y,M,U){(0,C.Z)(this,o),this.fb=n,this.router=e,this.activatedRoute=u,this.uplataService=i,this.kampService=h,this.smenaService=y,this._location=M,this._snackBar=U,this.matcher=new d.n,this.uplata={iznos_rsd:"",iznos_eur:""},this.action_create=!1,this.action_update=!1,this.action_delete=!1,this.kampovi=[],this.smene=[],this.ucesnici=[],this.uplataForm=function c(a,o){return a.group({iznos_rsd:[""],iznos_eur:[""],ucesnik_id:[""],status_uplate_id:[""],kamp_id:[""],smena_id:[""],datum_uplate:[""],depozit:[""]})}(this.fb)}return(0,g.Z)(o,[{key:"ngOnInit",value:function(){var e=this;this.kampService.all().subscribe(function(u){return e.kampovi=u}),this.loadFromUrl()}},{key:"kamp_changed",value:function(e){var u=this;this.kampService.smene(e.value).subscribe(function(i){return u.smene=i}),this.kampService.ucesnici(e.value).subscribe(function(i){return u.ucesnici=i})}},{key:"smena_changed",value:function(e){var u=this;this.smenaService.ucesnici(e.value).subscribe(function(i){return u.ucesnici=i})}},{key:"store",value:function(){var e=this;!this.action_create||this.uplataService.store(this.uplataForm.value).subscribe({next:function(i){e.router.navigateByUrl("/admin/kamp")},error:function(i){e.submitFormFailed(e.uplataForm,i)}})}},{key:"update",value:function(){var e=this;!this.action_update||this.uplataService.update(this.uplata.id,this.uplataForm.getRawValue()).subscribe({next:function(i){e.router.navigateByUrl("/admin/uplata")},error:function(i){e.submitFormFailed(e.uplataForm,i)}})}},{key:"delete",value:function(){var e=this;!this.action_delete||this.uplataService.delete(this.uplata.id).subscribe({next:function(i){e.router.navigateByUrl("/admin/uplata")},error:function(i){e.submitFormFailed(e.uplataForm,i)}})}},{key:"submitForm",value:function(){this.store(),this.update(),this.delete()}},{key:"submitFormFailed",value:function(e,u){422===u.status?Object.keys(u.error.errors).forEach(function(i){var h=e.get(i);h&&h.setErrors({serverError:u.error.errors[i]})}):this._snackBar.open(u.error.message,"OK")}},{key:"goBack",value:function(){this._location.back()}},{key:"loadFromUrl",value:function(){var u,i,e=this;this.action_create=this.activatedRoute.snapshot.url.map(function(h,y,M){return h.path}).includes("unos"),this.action_update=this.activatedRoute.snapshot.url.map(function(h,y,M){return h.path}).includes("izmena"),this.action_delete=this.activatedRoute.snapshot.url.map(function(h,y,M){return h.path}).includes("brisanje"),(null===(u=this.activatedRoute.snapshot.params)||void 0===u?void 0:u.uplataId)&&this.uplataService.find(null===(i=this.activatedRoute.snapshot.params)||void 0===i?void 0:i.uplataId).subscribe(function(h){console.log(h),e.uplata=h,e.kamp_changed({value:e.uplata.kamp_id})})}}]),o}();return a.\u0275fac=function(n){return new(n||a)(t.Y36(v.qu),t.Y36(s.F0),t.Y36(s.gz),t.Y36(f.J),t.Y36(p.f),t.Y36(m.n),t.Y36(_.S$),t.Y36(b.ux))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-form"]],decls:49,vars:30,consts:[[1,"main-content"],[1,"container"],[1,"row"],[1,"offset-md-2","col-md-8"],["novalidate","",3,"formGroup","ngSubmit"],[1,"col-md-12"],[1,"card"],[1,"card-header","card-header-info"],[1,"card-title"],["class","card-category",4,"ngIf"],[1,"card-body"],[1,"example-full-width","col-md-6"],["placeholder","Kamp","formControlName","kamp_id",3,"ngModel","errorStateMatcher","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["placeholder","Smena","formControlName","smena_id",3,"ngModel","errorStateMatcher","selectionChange"],[1,"example-full-width","col-md-12"],["placeholder","U\u010desnik","formControlName","ucesnik_id",3,"ngModel","errorStateMatcher"],["matInput","","placeholder","Iznos RSD","formControlName","iznos_rsd",3,"ngModel","readonly","errorStateMatcher"],["matInput","","placeholder","Iznos EUR","formControlName","iznos_eur",3,"ngModel","readonly","errorStateMatcher"],["appCustomDateFormat1","",1,"example-full-width","col-md-6"],["matInput","","formControlName","datum_uplate",3,"matDatepicker","ngModel","readonly","errorStateMatcher"],["matSuffix","",3,"for"],["datum_picker",""],[1,"col-md-6"],["formControlName","depozit",3,"ngModel"],["mat-raised-button","","type","button",1,"btn","btn-danger","pull-right",3,"click"],[1,"clearfix"],[1,"card-category"],[3,"value"]],template:function(n,e){if(1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4),t.NdJ("ngSubmit",function(){return e.submitForm()}),t.TgZ(5,"div",2)(6,"div",5)(7,"div",6)(8,"div",7)(9,"h4",8),t._uU(10,"Uplata"),t.qZA(),t.YNc(11,z,2,0,"p",9),t.YNc(12,R,2,0,"p",9),t.YNc(13,Q,2,0,"p",9),t.qZA(),t.TgZ(14,"div",10)(15,"div",2)(16,"mat-form-field",11)(17,"mat-select",12),t.NdJ("selectionChange",function(S){return e.kamp_changed(S)}),t.YNc(18,B,2,2,"mat-option",13),t.qZA(),t.YNc(19,P,2,1,"mat-error",14),t.qZA(),t.TgZ(20,"mat-form-field",11)(21,"mat-select",15),t.NdJ("selectionChange",function(S){return e.smena_changed(S)}),t.YNc(22,Y,2,2,"mat-option",13),t.qZA(),t.YNc(23,j,2,1,"mat-error",14),t.qZA(),t.TgZ(24,"mat-form-field",16)(25,"mat-select",17),t.YNc(26,W,2,4,"mat-option",13),t.qZA(),t.YNc(27,K,2,1,"mat-error",14),t.qZA()(),t.TgZ(28,"div",2)(29,"mat-form-field",11),t._UZ(30,"input",18),t.YNc(31,L,2,1,"mat-error",14),t.qZA(),t.TgZ(32,"mat-form-field",11),t._UZ(33,"input",19),t.YNc(34,q,2,1,"mat-error",14),t.qZA()(),t.TgZ(35,"div",2)(36,"mat-form-field",20)(37,"mat-label"),t._uU(38,"Datum uplate"),t.qZA(),t._UZ(39,"input",21)(40,"mat-datepicker-toggle",22)(41,"mat-datepicker",null,23),t.qZA(),t.TgZ(43,"div",24)(44,"mat-checkbox",25),t._uU(45,"Depozit"),t.qZA()()(),t.TgZ(46,"button",26),t.NdJ("click",function(){return e.submitForm()}),t._uU(47," Potvrdi "),t.qZA(),t._UZ(48,"div",27),t.qZA()()()()()()()()()),2&n){var i,h,y,M,U,u=t.MAs(42);t.xp6(4),t.Q6J("formGroup",e.uplataForm),t.xp6(7),t.Q6J("ngIf",e.action_create),t.xp6(1),t.Q6J("ngIf",e.action_update),t.xp6(1),t.Q6J("ngIf",e.action_delete),t.xp6(4),t.Q6J("ngModel",e.uplata.kamp_id)("errorStateMatcher",e.matcher),t.xp6(1),t.Q6J("ngForOf",e.kampovi),t.xp6(1),t.Q6J("ngIf",null==(i=e.uplataForm.get("kamp_id"))||null==i.errors?null:i.errors.serverError),t.xp6(2),t.Q6J("ngModel",e.uplata.smena_id)("errorStateMatcher",e.matcher),t.xp6(1),t.Q6J("ngForOf",e.smene),t.xp6(1),t.Q6J("ngIf",null==(h=e.uplataForm.get("smena_id"))||null==h.errors?null:h.errors.serverError),t.xp6(2),t.Q6J("ngModel",e.uplata.ucesnik_id)("errorStateMatcher",e.matcher),t.xp6(1),t.Q6J("ngForOf",e.ucesnici),t.xp6(1),t.Q6J("ngIf",null==(y=e.uplataForm.get("ucesnik_id"))||null==y.errors?null:y.errors.serverError),t.xp6(3),t.Q6J("ngModel",e.uplata.iznos_rsd)("readonly",e.action_delete)("errorStateMatcher",e.matcher),t.xp6(1),t.Q6J("ngIf",null==(M=e.uplataForm.get("iznos_rsd"))||null==M.errors?null:M.errors.serverError),t.xp6(2),t.Q6J("ngModel",e.uplata.iznos_eur)("readonly",e.action_delete)("errorStateMatcher",e.matcher),t.xp6(1),t.Q6J("ngIf",null==(U=e.uplataForm.get("iznos_rsd"))||null==U.errors?null:U.errors.serverError),t.xp6(5),t.Q6J("matDatepicker",u)("ngModel",e.uplata.datum_uplate)("readonly",e.action_delete)("errorStateMatcher",e.matcher),t.xp6(1),t.Q6J("for",u),t.xp6(4),t.Q6J("ngModel",e.uplata.depozit)}},directives:[v._Y,v.JL,v.sg,_.O5,k.KE,T.gD,v.JJ,v.u,_.sg,E.ey,k.TO,J.Nt,v.Fj,k.hX,I.hl,I.nW,k.R9,I.Mq,x.oG,N.lW],styles:[""]}),a}(),G=r(25245),X=r(28387);function H(a,o){if(1&a&&(t.TgZ(0,"mat-option",17),t._uU(1),t.qZA()),2&a){var n=o.$implicit;t.Q6J("value",n.id),t.xp6(1),t.Oqu(n.naziv)}}function V(a,o){if(1&a&&(t.TgZ(0,"mat-option",17),t._uU(1),t.qZA()),2&a){var n=o.$implicit;t.Q6J("value",n.id),t.xp6(1),t.Oqu(n.naziv)}}var tt=[{path:"",pathMatch:"full",component:function(){var a=function(){function o(n,e){var u=this;(0,C.Z)(this,o),this.router=n,this.kampService=e,this.kampovi=[],this.smene=[],this.kamp_id=null,this.smena_id=null,this.kampService.all().subscribe(function(i){u.kampovi=i})}return(0,g.Z)(o,[{key:"kamp_selected",value:function(e){var u=this;this.smene=this.kampovi.find(function(i){return i.id==u.kamp_id}).smene}},{key:"ngOnInit",value:function(){}}]),o}();return a.\u0275fac=function(n){return new(n||a)(t.Y36(s.F0),t.Y36(p.f))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-index"]],decls:24,vars:6,consts:[[1,"main-content"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header","card-header-info"],[1,"card-title"],[1,"card-category"],[1,"card-body"],["mat-mini-fab","","aria-label","Example icon button with a delete icon","routerLink","unos",1,"pull-right"],[1,"pull-right","col-md-3"],["placeholder","Izaberite smenu",3,"ngModel","ngModelChange"],["smena",""],[3,"value",4,"ngFor","ngForOf"],["placeholder","Izaberite kamp",3,"ngModel","ngModelChange","selectionChange"],["kamp",""],[3,"kamp_id","smena_id"],[3,"value"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h4",6),t._uU(7,"Uplata "),t.qZA(),t._UZ(8,"p",7),t.qZA(),t.TgZ(9,"div",8)(10,"div",2)(11,"div",3)(12,"button",9)(13,"mat-icon"),t._uU(14,"add"),t.qZA()()()(),t.TgZ(15,"mat-form-field",10)(16,"mat-select",11,12),t.NdJ("ngModelChange",function(i){return e.smena_id=i}),t.YNc(18,H,2,2,"mat-option",13),t.qZA()(),t.TgZ(19,"mat-form-field",10)(20,"mat-select",14,15),t.NdJ("ngModelChange",function(i){return e.kamp_id=i})("selectionChange",function(i){return e.kamp_selected(i)}),t.YNc(22,V,2,2,"mat-option",13),t.qZA()(),t._UZ(23,"app-uplata-datatable",16),t.qZA()()()()()()),2&n&&(t.xp6(16),t.Q6J("ngModel",e.smena_id),t.xp6(2),t.Q6J("ngForOf",e.smene),t.xp6(2),t.Q6J("ngModel",e.kamp_id),t.xp6(2),t.Q6J("ngForOf",e.kampovi),t.xp6(1),t.Q6J("kamp_id",e.kamp_id)("smena_id",e.smena_id))},directives:[N.lW,s.rH,G.Hw,k.KE,T.gD,v.JJ,v.On,_.sg,E.ey,X.R],styles:[""]}),a}()},{path:"unos",pathMatch:"full",component:A},{path:":uplataId",component:F},{path:":uplataId/izmena",component:A},{path:":uplataId/brisanje",component:A}],et=function(){var a=(0,g.Z)(function o(){(0,C.Z)(this,o)});return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[s.Bz.forChild(tt)],s.Bz]}),a}(),at=r(2466),nt=function(){var a=(0,g.Z)(function o(){(0,C.Z)(this,o)});return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[_.ez,et,at.q,v.u5,v.UX]]}),a}()},33812:function(O,Z,r){r.d(Z,{J:function(){return F}});var g=r(15671),C=r(43144),_=r(40520),s=r(92340),t=r(91891),F=function(){var p=function(){function d(m){(0,g.Z)(this,d),this.httpClient=m,this.httpOptions={headers:new _.WM({"Content-Type":"application/json"})}}return(0,C.Z)(d,[{key:"datatable",value:function(l){return this.httpClient.post("".concat(s.N.api_url,"/datatable/uplata"),l)}},{key:"all",value:function(){return this.httpClient.get("".concat(s.N.api_url,"/uplata"))}},{key:"find",value:function(l){return this.httpClient.get("".concat(s.N.api_url,"/uplata/").concat(l))}},{key:"store",value:function(l){return this.httpClient.post("".concat(s.N.api_url,"/uplata"),JSON.stringify(l),this.httpOptions)}},{key:"update",value:function(l,c){return this.httpClient.put("".concat(s.N.api_url,"/uplata/").concat(l),JSON.stringify(c),this.httpOptions)}},{key:"delete",value:function(l){return this.httpClient.delete("".concat(s.N.api_url,"/uplata/").concat(l),this.httpOptions)}}]),d}();return p.\u0275fac=function(m){return new(m||p)(t.LFG(_.eN))},p.\u0275prov=t.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p}()}}]);